/*
 * Copyright (c) 2012-2014 Israel Jacquez
 * See LICENSE for details.
 *
 * Israel Jacquez <mrkotfw@gmail.com>
 */

#define ASSERT                  1
#define FIXMATH_NO_OVERFLOW     1
#define FIXMATH_NO_ROUNDING     1

#include <yaul.h>
#include <fixmath.h>
#include <tga.h>

#include <assert.h>
#include <stdbool.h>
#include <stdio.h>
#include <stdlib.h>

#include <sys/queue.h>

#include "test.h"
#include "common.h"
#include "matrix_stack.h"

#define CUBE_POLYGON_CNT 6

static fix16_vector4_t __unused cube_vertices[] = {
        FIX16_VERTEX4(-0.25f,  0.25f, -0.25f, 1.0f),
        FIX16_VERTEX4( 0.25f,  0.25f, -0.25f, 1.0f),
        FIX16_VERTEX4( 0.25f, -0.25f, -0.25f, 1.0f),
        FIX16_VERTEX4(-0.25f, -0.25f, -0.25f, 1.0f),

        FIX16_VERTEX4(-0.25f,  0.25f, -0.75f, 1.0f),
        FIX16_VERTEX4( 0.25f,  0.25f, -0.75f, 1.0f),
        FIX16_VERTEX4( 0.25f, -0.25f, -0.75f, 1.0f),
        FIX16_VERTEX4(-0.25f, -0.25f, -0.75f, 1.0f)
};

/*
 * Winding order (vertex ordering)
 *
 * Quadrangles have a particular facing, "front" or "back". This is
 * defined by the order of the four vertices that make up the
 * quadrangle. This is important, for example, in the case where the
 * normal of a quadrangle is computed. If in a cube, the back face is
 * not facing "front", the surface normal will point in the wrong
 * direction ((0,0,1) instead of (0,0,-1)).
 *
 *             B--------A
 *             | BACK   |
 *             |        |
 *             |        |
 *             |        |
 *             C--------D
 *
 *             A--------B
 *            / TOP    /
 *      A    /        /   B
 *     /|   /        /   /|
 *    / |  /        /   / |
 *   /  | D--------C   /  |
 *  /   |             /   |
 * B    D A--------B A    C
 * |   /  | FRONT  | |   /
 * |  /   |        | |  /
 * | /    |        | | /
 * |/     |        | |/
 * C      D--------C D
 *
 *        D--------C
 *       / BOTTOM /
 *      /        /
 *     /        /
 *    /        /
 *   A--------B
 */

static uint32_t __unused cube_indices[CUBE_POLYGON_CNT * 4] = {
        /* Front */
        0, 1, 2, 3,
        /* Back */
        5, 4, 7, 6,
        /* Left */
        4, 0, 3, 7,
        /* Right */
        1, 5, 6, 2,
        /* Top */
        0, 4, 5, 1,
        /* Bottom */
        7, 3, 2, 6
};

static fix16_vector4_t __unused cube_normals[CUBE_POLYGON_CNT] = {
        FIX16_VERTEX4( 0.0f,  0.0f,  1.0f, 1.0f),
        FIX16_VERTEX4( 0.0f,  0.0f, -1.0f, 1.0f),
        FIX16_VERTEX4(-1.0f,  0.0f,  0.0f, 1.0f),
        FIX16_VERTEX4( 1.0f,  0.0f,  0.0f, 1.0f),
        FIX16_VERTEX4( 0.0f,  1.0f,  0.0f, 1.0f),
        FIX16_VERTEX4( 0.0f, -1.0f,  0.0f, 1.0f)
};

static fix16_t __unused cube_cull_points[CUBE_POLYGON_CNT] = {
        F16(0.0f),
        F16(0.0f),
        F16(0.0f),
        F16(0.0f),
        F16(0.0f),
        F16(0.0f)
};

#define TEAPOT_POLYGON_CNT 514
static fix16_vector4_t __unused teapot_vertices[] = {
        FIX16_VERTEX4(0.370303f, 0.304443f, 0.142938f, 1.0f),
        FIX16_VERTEX4(0.375425f, 0.283457f, 0.145117f, 1.0f),
        FIX16_VERTEX4(0.406266f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.400714f, 0.304443f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.376244f, 0.311438f, 0.145466f, 1.0f),
        FIX16_VERTEX4(0.407155f, 0.311438f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.388331f, 0.304443f, 0.150609f, 1.0f),
        FIX16_VERTEX4(0.420257f, 0.304443f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.401647f, 0.283457f, 0.156274f, 1.0f),
        FIX16_VERTEX4(0.434692f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.286917f, 0.304443f, 0.267527f, 1.0f),
        FIX16_VERTEX4(0.290859f, 0.283457f, 0.271468f, 1.0f),
        FIX16_VERTEX4(0.291490f, 0.311438f, 0.272099f, 1.0f),
        FIX16_VERTEX4(0.300792f, 0.304443f, 0.281402f, 1.0f),
        FIX16_VERTEX4(0.311041f, 0.283457f, 0.291650f, 1.0f),
        FIX16_VERTEX4(0.162329f, 0.304443f, 0.350912f, 1.0f),
        FIX16_VERTEX4(0.164508f, 0.283457f, 0.356034f, 1.0f),
        FIX16_VERTEX4(0.164857f, 0.311438f, 0.356853f, 1.0f),
        FIX16_VERTEX4(0.169999f, 0.304443f, 0.368940f, 1.0f),
        FIX16_VERTEX4(0.175665f, 0.283457f, 0.382256f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.304443f, 0.381324f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.283457f, 0.386876f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.311438f, 0.387764f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.304443f, 0.400866f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.283457f, 0.415301f, 1.0f),
        FIX16_VERTEX4(-0.150262f, 0.304443f, 0.350912f, 1.0f),
        FIX16_VERTEX4(-0.158680f, 0.283457f, 0.356034f, 1.0f),
        FIX16_VERTEX4(-0.149585f, 0.311438f, 0.356853f, 1.0f),
        FIX16_VERTEX4(-0.153547f, 0.304443f, 0.368940f, 1.0f),
        FIX16_VERTEX4(-0.159044f, 0.283457f, 0.382256f, 1.0f),
        FIX16_VERTEX4(-0.274344f, 0.304443f, 0.267527f, 1.0f),
        FIX16_VERTEX4(-0.283832f, 0.283457f, 0.271468f, 1.0f),
        FIX16_VERTEX4(-0.276068f, 0.311438f, 0.272099f, 1.0f),
        FIX16_VERTEX4(-0.284322f, 0.304443f, 0.281402f, 1.0f),
        FIX16_VERTEX4(-0.294421f, 0.283457f, 0.291650f, 1.0f),
        FIX16_VERTEX4(-0.355200f, 0.304443f, 0.142938f, 1.0f),
        FIX16_VERTEX4(-0.362402f, 0.283457f, 0.145117f, 1.0f),
        FIX16_VERTEX4(-0.360073f, 0.311438f, 0.145466f, 1.0f),
        FIX16_VERTEX4(-0.371767f, 0.304443f, 0.150609f, 1.0f),
        FIX16_VERTEX4(-0.385027f, 0.283457f, 0.156274f, 1.0f),
        FIX16_VERTEX4(-0.384094f, 0.304443f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.389646f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.390534f, 0.311438f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.403636f, 0.304443f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.418071f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.353683f, 0.304443f, -0.165099f, 1.0f),
        FIX16_VERTEX4(-0.358804f, 0.283457f, -0.167278f, 1.0f),
        FIX16_VERTEX4(-0.359624f, 0.311438f, -0.167627f, 1.0f),
        FIX16_VERTEX4(-0.371711f, 0.304443f, -0.172769f, 1.0f),
        FIX16_VERTEX4(-0.385027f, 0.283457f, -0.178435f, 1.0f),
        FIX16_VERTEX4(-0.270297f, 0.304443f, -0.289687f, 1.0f),
        FIX16_VERTEX4(-0.274238f, 0.283457f, -0.293629f, 1.0f),
        FIX16_VERTEX4(-0.274869f, 0.311438f, -0.294260f, 1.0f),
        FIX16_VERTEX4(-0.284172f, 0.304443f, -0.303562f, 1.0f),
        FIX16_VERTEX4(-0.294421f, 0.283457f, -0.313811f, 1.0f),
        FIX16_VERTEX4(-0.145708f, 0.304443f, -0.373073f, 1.0f),
        FIX16_VERTEX4(-0.147887f, 0.283457f, -0.378195f, 1.0f),
        FIX16_VERTEX4(-0.148236f, 0.311438f, -0.379014f, 1.0f),
        FIX16_VERTEX4(-0.153379f, 0.304443f, -0.391101f, 1.0f),
        FIX16_VERTEX4(-0.159044f, 0.283457f, -0.404417f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.304443f, -0.403484f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.283457f, -0.409036f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.311438f, -0.409925f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.304443f, -0.423027f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.283457f, -0.437462f, 1.0f),
        FIX16_VERTEX4(0.162329f, 0.304443f, -0.373073f, 1.0f),
        FIX16_VERTEX4(0.164508f, 0.283457f, -0.378195f, 1.0f),
        FIX16_VERTEX4(0.164857f, 0.311438f, -0.379014f, 1.0f),
        FIX16_VERTEX4(0.169999f, 0.304443f, -0.391101f, 1.0f),
        FIX16_VERTEX4(0.175665f, 0.283457f, -0.404417f, 1.0f),
        FIX16_VERTEX4(0.286917f, 0.304443f, -0.289687f, 1.0f),
        FIX16_VERTEX4(0.290859f, 0.283457f, -0.293629f, 1.0f),
        FIX16_VERTEX4(0.291490f, 0.311438f, -0.294260f, 1.0f),
        FIX16_VERTEX4(0.300792f, 0.304443f, -0.303562f, 1.0f),
        FIX16_VERTEX4(0.311041f, 0.283457f, -0.313811f, 1.0f),
        FIX16_VERTEX4(0.370303f, 0.304443f, -0.165099f, 1.0f),
        FIX16_VERTEX4(0.375425f, 0.283457f, -0.167278f, 1.0f),
        FIX16_VERTEX4(0.376244f, 0.311438f, -0.167627f, 1.0f),
        FIX16_VERTEX4(0.388331f, 0.304443f, -0.172769f, 1.0f),
        FIX16_VERTEX4(0.401647f, 0.283457f, -0.178435f, 1.0f),
        FIX16_VERTEX4(0.449790f, 0.171865f, 0.176758f, 1.0f),
        FIX16_VERTEX4(0.486879f, 0.171865f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.491787f, 0.062271f, 0.194626f, 1.0f),
        FIX16_VERTEX4(0.532404f, 0.062271f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.521492f, -0.043325f, 0.207265f, 1.0f),
        FIX16_VERTEX4(0.564605f, -0.043325f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.532759f, -0.142925f, 0.212059f, 1.0f),
        FIX16_VERTEX4(0.576819f, -0.142925f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.348094f, 0.171865f, 0.328703f, 1.0f),
        FIX16_VERTEX4(0.380417f, 0.062271f, 0.361026f, 1.0f),
        FIX16_VERTEX4(0.403279f, -0.043325f, 0.383889f, 1.0f),
        FIX16_VERTEX4(0.411951f, -0.142925f, 0.392561f, 1.0f),
        FIX16_VERTEX4(0.196148f, 0.171865f, 0.430399f, 1.0f),
        FIX16_VERTEX4(0.214017f, 0.062271f, 0.472396f, 1.0f),
        FIX16_VERTEX4(0.226656f, -0.043325f, 0.502101f, 1.0f),
        FIX16_VERTEX4(0.231450f, -0.142925f, 0.513369f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.171865f, 0.467488f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.062271f, 0.513013f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.043325f, 0.545214f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.142925f, 0.557428f, 1.0f),
        FIX16_VERTEX4(-0.179528f, 0.171865f, 0.430399f, 1.0f),
        FIX16_VERTEX4(-0.197397f, 0.062271f, 0.472396f, 1.0f),
        FIX16_VERTEX4(-0.210035f, -0.043325f, 0.502101f, 1.0f),
        FIX16_VERTEX4(-0.214829f, -0.142925f, 0.513369f, 1.0f),
        FIX16_VERTEX4(-0.331474f, 0.171865f, 0.328703f, 1.0f),
        FIX16_VERTEX4(-0.363796f, 0.062271f, 0.361026f, 1.0f),
        FIX16_VERTEX4(-0.386659f, -0.043325f, 0.383889f, 1.0f),
        FIX16_VERTEX4(-0.395331f, -0.142925f, 0.392561f, 1.0f),
        FIX16_VERTEX4(-0.433169f, 0.171865f, 0.176758f, 1.0f),
        FIX16_VERTEX4(-0.475166f, 0.062271f, 0.194626f, 1.0f),
        FIX16_VERTEX4(-0.504871f, -0.043325f, 0.207265f, 1.0f),
        FIX16_VERTEX4(-0.516139f, -0.142925f, 0.212059f, 1.0f),
        FIX16_VERTEX4(-0.470258f, 0.171865f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.515784f, 0.062271f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.547984f, -0.043325f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.560198f, -0.142925f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.433169f, 0.171865f, -0.198919f, 1.0f),
        FIX16_VERTEX4(-0.475166f, 0.062271f, -0.216787f, 1.0f),
        FIX16_VERTEX4(-0.504871f, -0.043325f, -0.229426f, 1.0f),
        FIX16_VERTEX4(-0.516139f, -0.142925f, -0.234220f, 1.0f),
        FIX16_VERTEX4(-0.331474f, 0.171865f, -0.350864f, 1.0f),
        FIX16_VERTEX4(-0.363796f, 0.062271f, -0.383187f, 1.0f),
        FIX16_VERTEX4(-0.386659f, -0.043325f, -0.406049f, 1.0f),
        FIX16_VERTEX4(-0.395331f, -0.142925f, -0.414721f, 1.0f),
        FIX16_VERTEX4(-0.179528f, 0.171865f, -0.452560f, 1.0f),
        FIX16_VERTEX4(-0.197397f, 0.062271f, -0.494557f, 1.0f),
        FIX16_VERTEX4(-0.210035f, -0.043325f, -0.524262f, 1.0f),
        FIX16_VERTEX4(-0.214829f, -0.142925f, -0.535529f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.171865f, -0.489649f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.062271f, -0.535174f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.043325f, -0.567375f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.142925f, -0.579589f, 1.0f),
        FIX16_VERTEX4(0.196148f, 0.171865f, -0.452560f, 1.0f),
        FIX16_VERTEX4(0.214017f, 0.062271f, -0.494557f, 1.0f),
        FIX16_VERTEX4(0.226656f, -0.043325f, -0.524262f, 1.0f),
        FIX16_VERTEX4(0.231450f, -0.142925f, -0.535529f, 1.0f),
        FIX16_VERTEX4(0.348094f, 0.171865f, -0.350864f, 1.0f),
        FIX16_VERTEX4(0.380417f, 0.062271f, -0.383187f, 1.0f),
        FIX16_VERTEX4(0.403279f, -0.043325f, -0.406049f, 1.0f),
        FIX16_VERTEX4(0.411951f, -0.142925f, -0.414721f, 1.0f),
        FIX16_VERTEX4(0.449790f, 0.171865f, -0.198919f, 1.0f),
        FIX16_VERTEX4(0.491787f, 0.062271f, -0.216787f, 1.0f),
        FIX16_VERTEX4(0.521492f, -0.043325f, -0.229426f, 1.0f),
        FIX16_VERTEX4(0.532759f, -0.142925f, -0.234220f, 1.0f),
        FIX16_VERTEX4(0.512273f, -0.227202f, 0.203343f, 1.0f),
        FIX16_VERTEX4(0.554611f, -0.227202f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.467203f, -0.289493f, 0.184167f, 1.0f),
        FIX16_VERTEX4(0.505755f, -0.289493f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.422133f, -0.331798f, 0.164991f, 1.0f),
        FIX16_VERTEX4(0.456899f, -0.331798f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.401647f, -0.356115f, 0.156274f, 1.0f),
        FIX16_VERTEX4(0.434692f, -0.356115f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.396184f, -0.227202f, 0.376793f, 1.0f),
        FIX16_VERTEX4(0.361496f, -0.289493f, 0.342106f, 1.0f),
        FIX16_VERTEX4(0.326808f, -0.331798f, 0.307418f, 1.0f),
        FIX16_VERTEX4(0.311041f, -0.356115f, 0.291650f, 1.0f),
        FIX16_VERTEX4(0.222733f, -0.227202f, 0.492882f, 1.0f),
        FIX16_VERTEX4(0.203557f, -0.289493f, 0.447813f, 1.0f),
        FIX16_VERTEX4(0.184381f, -0.331798f, 0.402743f, 1.0f),
        FIX16_VERTEX4(0.175665f, -0.356115f, 0.382256f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.227202f, 0.535221f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.289493f, 0.486365f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.331798f, 0.437508f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.356115f, 0.415301f, 1.0f),
        FIX16_VERTEX4(-0.206113f, -0.227202f, 0.492882f, 1.0f),
        FIX16_VERTEX4(-0.186937f, -0.289493f, 0.447813f, 1.0f),
        FIX16_VERTEX4(-0.167761f, -0.331798f, 0.402743f, 1.0f),
        FIX16_VERTEX4(-0.159044f, -0.356115f, 0.382256f, 1.0f),
        FIX16_VERTEX4(-0.379564f, -0.227202f, 0.376793f, 1.0f),
        FIX16_VERTEX4(-0.344876f, -0.289493f, 0.342106f, 1.0f),
        FIX16_VERTEX4(-0.310188f, -0.331798f, 0.307418f, 1.0f),
        FIX16_VERTEX4(-0.294421f, -0.356115f, 0.291650f, 1.0f),
        FIX16_VERTEX4(-0.495653f, -0.227202f, 0.203343f, 1.0f),
        FIX16_VERTEX4(-0.450583f, -0.289493f, 0.184167f, 1.0f),
        FIX16_VERTEX4(-0.405513f, -0.331798f, 0.164991f, 1.0f),
        FIX16_VERTEX4(-0.385027f, -0.356115f, 0.156274f, 1.0f),
        FIX16_VERTEX4(-0.537991f, -0.227202f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.489135f, -0.289493f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.440279f, -0.331798f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.418071f, -0.356115f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.495653f, -0.227202f, -0.225504f, 1.0f),
        FIX16_VERTEX4(-0.450583f, -0.289493f, -0.206327f, 1.0f),
        FIX16_VERTEX4(-0.405513f, -0.331798f, -0.187151f, 1.0f),
        FIX16_VERTEX4(-0.385027f, -0.356115f, -0.178435f, 1.0f),
        FIX16_VERTEX4(-0.379564f, -0.227202f, -0.398954f, 1.0f),
        FIX16_VERTEX4(-0.344876f, -0.289493f, -0.364266f, 1.0f),
        FIX16_VERTEX4(-0.310188f, -0.331798f, -0.329578f, 1.0f),
        FIX16_VERTEX4(-0.294421f, -0.356115f, -0.313811f, 1.0f),
        FIX16_VERTEX4(-0.206113f, -0.227202f, -0.515043f, 1.0f),
        FIX16_VERTEX4(-0.186937f, -0.289493f, -0.469973f, 1.0f),
        FIX16_VERTEX4(-0.167761f, -0.331798f, -0.424903f, 1.0f),
        FIX16_VERTEX4(-0.159044f, -0.356115f, -0.404417f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.227202f, -0.557382f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.289493f, -0.508525f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.331798f, -0.459669f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.356115f, -0.437462f, 1.0f),
        FIX16_VERTEX4(0.222733f, -0.227202f, -0.515043f, 1.0f),
        FIX16_VERTEX4(0.203557f, -0.289493f, -0.469973f, 1.0f),
        FIX16_VERTEX4(0.184381f, -0.331798f, -0.424903f, 1.0f),
        FIX16_VERTEX4(0.175665f, -0.356115f, -0.404417f, 1.0f),
        FIX16_VERTEX4(0.396184f, -0.227202f, -0.398954f, 1.0f),
        FIX16_VERTEX4(0.361496f, -0.289493f, -0.364266f, 1.0f),
        FIX16_VERTEX4(0.326808f, -0.331798f, -0.329578f, 1.0f),
        FIX16_VERTEX4(0.311041f, -0.356115f, -0.313811f, 1.0f),
        FIX16_VERTEX4(0.512273f, -0.227202f, -0.225504f, 1.0f),
        FIX16_VERTEX4(0.467203f, -0.289493f, -0.206327f, 1.0f),
        FIX16_VERTEX4(0.422133f, -0.331798f, -0.187151f, 1.0f),
        FIX16_VERTEX4(0.401647f, -0.356115f, -0.178435f, 1.0f),
        FIX16_VERTEX4(0.392736f, -0.371772f, 0.152483f, 1.0f),
        FIX16_VERTEX4(0.425031f, -0.371772f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.345105f, -0.385429f, 0.132217f, 1.0f),
        FIX16_VERTEX4(0.373399f, -0.385429f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.227411f, -0.395089f, 0.082141f, 1.0f),
        FIX16_VERTEX4(0.245818f, -0.395089f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.398754f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.304182f, -0.371772f, 0.284792f, 1.0f),
        FIX16_VERTEX4(0.267523f, -0.385429f, 0.248133f, 1.0f),
        FIX16_VERTEX4(0.176941f, -0.395089f, 0.157550f, 1.0f),
        FIX16_VERTEX4(0.171873f, -0.371772f, 0.373345f, 1.0f),
        FIX16_VERTEX4(0.151608f, -0.385429f, 0.325714f, 1.0f),
        FIX16_VERTEX4(0.101532f, -0.395089f, 0.208021f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.371772f, 0.405641f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.385429f, 0.354009f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.395089f, 0.226427f, 1.0f),
        FIX16_VERTEX4(-0.155253f, -0.371772f, 0.373345f, 1.0f),
        FIX16_VERTEX4(-0.134987f, -0.385429f, 0.325714f, 1.0f),
        FIX16_VERTEX4(-0.084911f, -0.395089f, 0.208021f, 1.0f),
        FIX16_VERTEX4(-0.287562f, -0.371772f, 0.284792f, 1.0f),
        FIX16_VERTEX4(-0.250903f, -0.385429f, 0.248133f, 1.0f),
        FIX16_VERTEX4(-0.160320f, -0.395089f, 0.157550f, 1.0f),
        FIX16_VERTEX4(-0.376115f, -0.371772f, 0.152483f, 1.0f),
        FIX16_VERTEX4(-0.328484f, -0.385429f, 0.132217f, 1.0f),
        FIX16_VERTEX4(-0.210791f, -0.395089f, 0.082141f, 1.0f),
        FIX16_VERTEX4(-0.408411f, -0.371772f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.356779f, -0.385429f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.229198f, -0.395089f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.376115f, -0.371772f, -0.174643f, 1.0f),
        FIX16_VERTEX4(-0.328484f, -0.385429f, -0.154378f, 1.0f),
        FIX16_VERTEX4(-0.210791f, -0.395089f, -0.104302f, 1.0f),
        FIX16_VERTEX4(-0.287562f, -0.371772f, -0.306952f, 1.0f),
        FIX16_VERTEX4(-0.250903f, -0.385429f, -0.270294f, 1.0f),
        FIX16_VERTEX4(-0.160320f, -0.395089f, -0.179711f, 1.0f),
        FIX16_VERTEX4(-0.155253f, -0.371772f, -0.395506f, 1.0f),
        FIX16_VERTEX4(-0.134987f, -0.385429f, -0.347875f, 1.0f),
        FIX16_VERTEX4(-0.084911f, -0.395089f, -0.230181f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.371772f, -0.427802f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.385429f, -0.376169f, 1.0f),
        FIX16_VERTEX4(0.008310f, -0.395089f, -0.248588f, 1.0f),
        FIX16_VERTEX4(0.171873f, -0.371772f, -0.395506f, 1.0f),
        FIX16_VERTEX4(0.151608f, -0.385429f, -0.347875f, 1.0f),
        FIX16_VERTEX4(0.101532f, -0.395089f, -0.230181f, 1.0f),
        FIX16_VERTEX4(0.304182f, -0.371772f, -0.306952f, 1.0f),
        FIX16_VERTEX4(0.267523f, -0.385429f, -0.270294f, 1.0f),
        FIX16_VERTEX4(0.176941f, -0.395089f, -0.179711f, 1.0f),
        FIX16_VERTEX4(0.392736f, -0.371772f, -0.174643f, 1.0f),
        FIX16_VERTEX4(0.345105f, -0.385429f, -0.154378f, 1.0f),
        FIX16_VERTEX4(0.227411f, -0.395089f, -0.104302f, 1.0f),
        FIX16_VERTEX4(-0.583252f, 0.185699f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.442055f, 0.186855f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.446497f, 0.176861f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.579297f, 0.175862f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.686891f, 0.177611f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.677453f, 0.168867f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.750724f, 0.155657f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.738301f, 0.149879f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.772501f, 0.112904f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.759176f, 0.112904f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.591955f, 0.207341f, 0.052877f, 1.0f),
        FIX16_VERTEX4(-0.432284f, 0.208840f, 0.052877f, 1.0f),
        FIX16_VERTEX4(-0.707655f, 0.196848f, 0.052877f, 1.0f),
        FIX16_VERTEX4(-0.778053f, 0.168367f, 0.052877f, 1.0f),
        FIX16_VERTEX4(-0.801814f, 0.112904f, 0.052877f, 1.0f),
        FIX16_VERTEX4(-0.600657f, 0.228983f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.422513f, 0.230825f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.728419f, 0.216085f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.805381f, 0.181077f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.831128f, 0.112904f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.604613f, 0.238820f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.418071f, 0.240819f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.737857f, 0.224829f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.817804f, 0.186855f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.844453f, 0.112904f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.600657f, 0.228983f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.422513f, 0.230825f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.728419f, 0.216085f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.805381f, 0.181077f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.831128f, 0.112904f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.591955f, 0.207341f, -0.075038f, 1.0f),
        FIX16_VERTEX4(-0.432284f, 0.208840f, -0.075038f, 1.0f),
        FIX16_VERTEX4(-0.707655f, 0.196848f, -0.075038f, 1.0f),
        FIX16_VERTEX4(-0.778053f, 0.168367f, -0.075038f, 1.0f),
        FIX16_VERTEX4(-0.801814f, 0.112904f, -0.075038f, 1.0f),
        FIX16_VERTEX4(-0.583252f, 0.185699f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.442055f, 0.186855f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.686891f, 0.177611f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.750724f, 0.155657f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.772501f, 0.112904f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.760183f, 0.049348f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.748073f, 0.054943f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.721590f, -0.023546f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.712985f, -0.015010f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.654267f, -0.095503f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.651248f, -0.084963f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.555757f, -0.156249f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.560198f, -0.142925f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.786824f, 0.037038f, 0.052877f, 1.0f),
        FIX16_VERTEX4(-0.740522f, -0.042325f, 0.052877f, 1.0f),
        FIX16_VERTEX4(-0.660909f, -0.118691f, 0.052877f, 1.0f),
        FIX16_VERTEX4(-0.545986f, -0.185563f, 0.052877f, 1.0f),
        FIX16_VERTEX4(-0.813466f, 0.024729f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.759454f, -0.061104f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.667550f, -0.141878f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.536214f, -0.214877f, 0.036888f, 1.0f),
        FIX16_VERTEX4(-0.825576f, 0.019134f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.768059f, -0.069640f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.670569f, -0.152418f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.531773f, -0.228201f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.813466f, 0.024729f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.759454f, -0.061104f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.667550f, -0.141878f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.536214f, -0.214877f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.786824f, 0.037038f, -0.075038f, 1.0f),
        FIX16_VERTEX4(-0.740522f, -0.042325f, -0.075038f, 1.0f),
        FIX16_VERTEX4(-0.660909f, -0.118691f, -0.075038f, 1.0f),
        FIX16_VERTEX4(-0.545986f, -0.185563f, -0.075038f, 1.0f),
        FIX16_VERTEX4(-0.760183f, 0.049348f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.721590f, -0.023546f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.654267f, -0.095503f, -0.059048f, 1.0f),
        FIX16_VERTEX4(-0.555757f, -0.156249f, -0.059048f, 1.0f),
        FIX16_VERTEX4(0.638305f, 0.010452f, 0.084206f, 1.0f),
        FIX16_VERTEX4(0.491543f, -0.030333f, 0.094449f, 1.0f),
        FIX16_VERTEX4(0.491543f, 0.006309f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.627896f, 0.037621f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.700292f, 0.097081f, 0.061671f, 1.0f),
        FIX16_VERTEX4(0.686967f, 0.112904f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.735629f, 0.198451f, 0.039136f, 1.0f),
        FIX16_VERTEX4(0.719390f, 0.204176f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.802446f, 0.283457f, 0.028893f, 1.0f),
        FIX16_VERTEX4(0.775797f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.661207f, -0.049321f, 0.115968f, 1.0f),
        FIX16_VERTEX4(0.491543f, -0.110946f, 0.129626f, 1.0f),
        FIX16_VERTEX4(0.729605f, 0.062271f, 0.085921f, 1.0f),
        FIX16_VERTEX4(0.771355f, 0.185855f, 0.055875f, 1.0f),
        FIX16_VERTEX4(0.861073f, 0.283457f, 0.042217f, 1.0f),
        FIX16_VERTEX4(0.684108f, -0.109093f, 0.084206f, 1.0f),
        FIX16_VERTEX4(0.491543f, -0.191559f, 0.094449f, 1.0f),
        FIX16_VERTEX4(0.758919f, 0.027461f, 0.061671f, 1.0f),
        FIX16_VERTEX4(0.807081f, 0.173260f, 0.039136f, 1.0f),
        FIX16_VERTEX4(0.919700f, 0.283457f, 0.028893f, 1.0f),
        FIX16_VERTEX4(0.694518f, -0.136262f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.491543f, -0.228201f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.772244f, 0.011639f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.823321f, 0.167534f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.946349f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.684108f, -0.109093f, -0.106367f, 1.0f),
        FIX16_VERTEX4(0.491543f, -0.191559f, -0.116610f, 1.0f),
        FIX16_VERTEX4(0.758919f, 0.027461f, -0.083832f, 1.0f),
        FIX16_VERTEX4(0.807081f, 0.173260f, -0.061297f, 1.0f),
        FIX16_VERTEX4(0.919700f, 0.283457f, -0.051054f, 1.0f),
        FIX16_VERTEX4(0.661207f, -0.049321f, -0.138129f, 1.0f),
        FIX16_VERTEX4(0.491543f, -0.110946f, -0.151786f, 1.0f),
        FIX16_VERTEX4(0.729605f, 0.062271f, -0.108082f, 1.0f),
        FIX16_VERTEX4(0.771355f, 0.185855f, -0.078036f, 1.0f),
        FIX16_VERTEX4(0.861073f, 0.283457f, -0.064378f, 1.0f),
        FIX16_VERTEX4(0.638305f, 0.010452f, -0.106367f, 1.0f),
        FIX16_VERTEX4(0.491543f, -0.030333f, -0.116610f, 1.0f),
        FIX16_VERTEX4(0.700292f, 0.097081f, -0.083832f, 1.0f),
        FIX16_VERTEX4(0.735629f, 0.198451f, -0.061297f, 1.0f),
        FIX16_VERTEX4(0.802446f, 0.283457f, -0.051054f, 1.0f),
        FIX16_VERTEX4(0.824767f, 0.296034f, 0.026395f, 1.0f),
        FIX16_VERTEX4(0.796227f, 0.295449f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.838116f, 0.300383f, 0.020898f, 1.0f),
        FIX16_VERTEX4(0.811329f, 0.299446f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.838515f, 0.296268f, 0.015402f, 1.0f),
        FIX16_VERTEX4(0.815770f, 0.295449f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.821988f, 0.283457f, 0.012904f, 1.0f),
        FIX16_VERTEX4(0.804222f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.887555f, 0.297322f, 0.038886f, 1.0f),
        FIX16_VERTEX4(0.897049f, 0.302444f, 0.031558f, 1.0f),
        FIX16_VERTEX4(0.888555f, 0.298072f, 0.024229f, 1.0f),
        FIX16_VERTEX4(0.861073f, 0.283457f, 0.020898f, 1.0f),
        FIX16_VERTEX4(0.950343f, 0.298611f, 0.026395f, 1.0f),
        FIX16_VERTEX4(0.955982f, 0.304505f, 0.020898f, 1.0f),
        FIX16_VERTEX4(0.938594f, 0.299875f, 0.015402f, 1.0f),
        FIX16_VERTEX4(0.900158f, 0.283457f, 0.012904f, 1.0f),
        FIX16_VERTEX4(0.978883f, 0.299196f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.982769f, 0.305442f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.961339f, 0.300695f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.917924f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.950343f, 0.298611f, -0.048555f, 1.0f),
        FIX16_VERTEX4(0.955982f, 0.304505f, -0.043059f, 1.0f),
        FIX16_VERTEX4(0.938594f, 0.299875f, -0.037563f, 1.0f),
        FIX16_VERTEX4(0.900158f, 0.283457f, -0.035064f, 1.0f),
        FIX16_VERTEX4(0.887555f, 0.297322f, -0.061047f, 1.0f),
        FIX16_VERTEX4(0.897049f, 0.302444f, -0.053718f, 1.0f),
        FIX16_VERTEX4(0.888555f, 0.298072f, -0.046390f, 1.0f),
        FIX16_VERTEX4(0.861073f, 0.283457f, -0.043059f, 1.0f),
        FIX16_VERTEX4(0.824767f, 0.296034f, -0.048555f, 1.0f),
        FIX16_VERTEX4(0.838116f, 0.300383f, -0.043059f, 1.0f),
        FIX16_VERTEX4(0.838515f, 0.296268f, -0.037563f, 1.0f),
        FIX16_VERTEX4(0.821988f, 0.283457f, -0.035064f, 1.0f),
        FIX16_VERTEX4(0.097664f, 0.482657f, 0.027024f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.496647f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.105134f, 0.482657f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.093563f, 0.448680f, 0.025270f, 1.0f),
        FIX16_VERTEX4(0.100693f, 0.448680f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.059947f, 0.406708f, 0.010919f, 1.0f),
        FIX16_VERTEX4(0.064273f, 0.406708f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.060755f, 0.368733f, 0.011234f, 1.0f),
        FIX16_VERTEX4(0.065161f, 0.368733f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.077145f, 0.482657f, 0.057755f, 1.0f),
        FIX16_VERTEX4(0.073982f, 0.448680f, 0.054591f, 1.0f),
        FIX16_VERTEX4(0.048074f, 0.406708f, 0.028683f, 1.0f),
        FIX16_VERTEX4(0.048674f, 0.368733f, 0.029284f, 1.0f),
        FIX16_VERTEX4(0.046415f, 0.482657f, 0.078274f, 1.0f),
        FIX16_VERTEX4(0.044660f, 0.448680f, 0.074173f, 1.0f),
        FIX16_VERTEX4(0.030309f, 0.406708f, 0.040556f, 1.0f),
        FIX16_VERTEX4(0.030624f, 0.368733f, 0.041365f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.482657f, 0.085744f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.448680f, 0.081302f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.406708f, 0.044882f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.368733f, 0.045771f, 1.0f),
        FIX16_VERTEX4(-0.029794f, 0.482657f, 0.078274f, 1.0f),
        FIX16_VERTEX4(-0.028040f, 0.448680f, 0.074173f, 1.0f),
        FIX16_VERTEX4(-0.013689f, 0.406708f, 0.040556f, 1.0f),
        FIX16_VERTEX4(-0.014004f, 0.368733f, 0.041365f, 1.0f),
        FIX16_VERTEX4(-0.060525f, 0.482657f, 0.057755f, 1.0f),
        FIX16_VERTEX4(-0.057361f, 0.448680f, 0.054591f, 1.0f),
        FIX16_VERTEX4(-0.031453f, 0.406708f, 0.028683f, 1.0f),
        FIX16_VERTEX4(-0.032054f, 0.368733f, 0.029284f, 1.0f),
        FIX16_VERTEX4(-0.081044f, 0.482657f, 0.027024f, 1.0f),
        FIX16_VERTEX4(-0.076943f, 0.448680f, 0.025270f, 1.0f),
        FIX16_VERTEX4(-0.043327f, 0.406708f, 0.010919f, 1.0f),
        FIX16_VERTEX4(-0.044135f, 0.368733f, 0.011234f, 1.0f),
        FIX16_VERTEX4(-0.088514f, 0.482657f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.084072f, 0.448680f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.047652f, 0.406708f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.048541f, 0.368733f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.081044f, 0.482657f, -0.049185f, 1.0f),
        FIX16_VERTEX4(-0.076943f, 0.448680f, -0.047430f, 1.0f),
        FIX16_VERTEX4(-0.043327f, 0.406708f, -0.033079f, 1.0f),
        FIX16_VERTEX4(-0.044135f, 0.368733f, -0.033394f, 1.0f),
        FIX16_VERTEX4(-0.060525f, 0.482657f, -0.079915f, 1.0f),
        FIX16_VERTEX4(-0.057361f, 0.448680f, -0.076752f, 1.0f),
        FIX16_VERTEX4(-0.031453f, 0.406708f, -0.050844f, 1.0f),
        FIX16_VERTEX4(-0.032054f, 0.368733f, -0.051444f, 1.0f),
        FIX16_VERTEX4(-0.029794f, 0.482657f, -0.100434f, 1.0f),
        FIX16_VERTEX4(-0.028040f, 0.448680f, -0.096333f, 1.0f),
        FIX16_VERTEX4(-0.013689f, 0.406708f, -0.062717f, 1.0f),
        FIX16_VERTEX4(-0.014004f, 0.368733f, -0.063525f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.482657f, -0.107904f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.448680f, -0.103463f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.406708f, -0.067043f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.368733f, -0.067931f, 1.0f),
        FIX16_VERTEX4(0.046415f, 0.482657f, -0.100434f, 1.0f),
        FIX16_VERTEX4(0.044660f, 0.448680f, -0.096333f, 1.0f),
        FIX16_VERTEX4(0.030309f, 0.406708f, -0.062717f, 1.0f),
        FIX16_VERTEX4(0.030624f, 0.368733f, -0.063525f, 1.0f),
        FIX16_VERTEX4(0.077145f, 0.482657f, -0.079915f, 1.0f),
        FIX16_VERTEX4(0.073982f, 0.448680f, -0.076752f, 1.0f),
        FIX16_VERTEX4(0.048074f, 0.406708f, -0.050844f, 1.0f),
        FIX16_VERTEX4(0.048674f, 0.368733f, -0.051444f, 1.0f),
        FIX16_VERTEX4(0.097664f, 0.482657f, -0.049185f, 1.0f),
        FIX16_VERTEX4(0.093563f, 0.448680f, -0.047430f, 1.0f),
        FIX16_VERTEX4(0.059947f, 0.406708f, -0.033079f, 1.0f),
        FIX16_VERTEX4(0.060755f, 0.368733f, -0.033394f, 1.0f),
        FIX16_VERTEX4(0.127950f, 0.343417f, 0.039823f, 1.0f),
        FIX16_VERTEX4(0.138001f, 0.343417f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.224646f, 0.326095f, 0.080965f, 1.0f),
        FIX16_VERTEX4(0.242820f, 0.326095f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.311507f, 0.308773f, 0.117922f, 1.0f),
        FIX16_VERTEX4(0.336979f, 0.308773f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.349202f, 0.283457f, 0.133960f, 1.0f),
        FIX16_VERTEX4(0.377841f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(0.100391f, 0.343417f, 0.081000f, 1.0f),
        FIX16_VERTEX4(0.174812f, 0.326095f, 0.155422f, 1.0f),
        FIX16_VERTEX4(0.241665f, 0.308773f, 0.222275f, 1.0f),
        FIX16_VERTEX4(0.270677f, 0.283457f, 0.251286f, 1.0f),
        FIX16_VERTEX4(0.059214f, 0.343417f, 0.108560f, 1.0f),
        FIX16_VERTEX4(0.100355f, 0.326095f, 0.205255f, 1.0f),
        FIX16_VERTEX4(0.137313f, 0.308773f, 0.292117f, 1.0f),
        FIX16_VERTEX4(0.153351f, 0.283457f, 0.329812f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.343417f, 0.118611f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.326095f, 0.223429f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.308773f, 0.317589f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.283457f, 0.358450f, 1.0f),
        FIX16_VERTEX4(-0.042593f, 0.343417f, 0.108560f, 1.0f),
        FIX16_VERTEX4(-0.083735f, 0.326095f, 0.205255f, 1.0f),
        FIX16_VERTEX4(-0.120692f, 0.308773f, 0.292117f, 1.0f),
        FIX16_VERTEX4(-0.136730f, 0.283457f, 0.329812f, 1.0f),
        FIX16_VERTEX4(-0.083770f, 0.343417f, 0.081000f, 1.0f),
        FIX16_VERTEX4(-0.158192f, 0.326095f, 0.155422f, 1.0f),
        FIX16_VERTEX4(-0.225045f, 0.308773f, 0.222275f, 1.0f),
        FIX16_VERTEX4(-0.254056f, 0.283457f, 0.251286f, 1.0f),
        FIX16_VERTEX4(-0.111330f, 0.343417f, 0.039823f, 1.0f),
        FIX16_VERTEX4(-0.208025f, 0.326095f, 0.080965f, 1.0f),
        FIX16_VERTEX4(-0.294887f, 0.308773f, 0.117922f, 1.0f),
        FIX16_VERTEX4(-0.332582f, 0.283457f, 0.133960f, 1.0f),
        FIX16_VERTEX4(-0.121381f, 0.343417f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.226200f, 0.326095f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.320359f, 0.308773f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.361220f, 0.283457f, -0.011080f, 1.0f),
        FIX16_VERTEX4(-0.111330f, 0.343417f, -0.061984f, 1.0f),
        FIX16_VERTEX4(-0.208025f, 0.326095f, -0.103125f, 1.0f),
        FIX16_VERTEX4(-0.294887f, 0.308773f, -0.140083f, 1.0f),
        FIX16_VERTEX4(-0.332582f, 0.283457f, -0.156121f, 1.0f),
        FIX16_VERTEX4(-0.083770f, 0.343417f, -0.103161f, 1.0f),
        FIX16_VERTEX4(-0.158192f, 0.326095f, -0.177582f, 1.0f),
        FIX16_VERTEX4(-0.225045f, 0.308773f, -0.244435f, 1.0f),
        FIX16_VERTEX4(-0.254056f, 0.283457f, -0.273447f, 1.0f),
        FIX16_VERTEX4(-0.042593f, 0.343417f, -0.130720f, 1.0f),
        FIX16_VERTEX4(-0.083735f, 0.326095f, -0.227416f, 1.0f),
        FIX16_VERTEX4(-0.120692f, 0.308773f, -0.314277f, 1.0f),
        FIX16_VERTEX4(-0.136730f, 0.283457f, -0.351972f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.343417f, -0.140771f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.326095f, -0.245590f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.308773f, -0.339749f, 1.0f),
        FIX16_VERTEX4(0.008310f, 0.283457f, -0.380611f, 1.0f),
        FIX16_VERTEX4(0.059214f, 0.343417f, -0.130720f, 1.0f),
        FIX16_VERTEX4(0.100355f, 0.326095f, -0.227416f, 1.0f),
        FIX16_VERTEX4(0.137313f, 0.308773f, -0.314277f, 1.0f),
        FIX16_VERTEX4(0.153351f, 0.283457f, -0.351972f, 1.0f),
        FIX16_VERTEX4(0.100391f, 0.343417f, -0.103161f, 1.0f),
        FIX16_VERTEX4(0.174812f, 0.326095f, -0.177582f, 1.0f),
        FIX16_VERTEX4(0.241665f, 0.308773f, -0.244435f, 1.0f),
        FIX16_VERTEX4(0.270677f, 0.283457f, -0.273447f, 1.0f),
        FIX16_VERTEX4(0.127950f, 0.343417f, -0.061984f, 1.0f),
        FIX16_VERTEX4(0.224646f, 0.326095f, -0.103125f, 1.0f),
        FIX16_VERTEX4(0.311507f, 0.308773f, -0.140083f, 1.0f),
        FIX16_VERTEX4(0.349202f, 0.283457f, -0.156121f, 1.0f)
};

static uint32_t __unused teapot_indices[TEAPOT_POLYGON_CNT * 4] = {
        3, 5, 77, 75,
        436, 437, 433, 432,
        89, 90, 84, 82,
        156, 157, 153, 152,
        258, 257, 260, 259,
        357, 358, 353, 352,
        403, 405, 463, 462,
        463, 464, 460, 459,
        344, 346, 341, 339,
        5, 7, 78, 77,
        144, 146, 147, 145,
        350, 349, 344, 345,
        263, 265, 266, 264,
        168, 169, 165, 164,
        483, 484, 480, 479,
        21, 20, 15, 16,
        289, 290, 285, 284,
        479, 480, 476, 475,
        78, 79, 74, 73,
        269, 270, 263, 261,
        260, 262, 294, 292,
        441, 502, 498, 437,
        137, 138, 134, 133,
        46, 45, 40, 41,
        314, 315, 311, 310,
        111, 172, 168, 107,
        133, 134, 130, 129,
        255, 256, 253, 252,
        2, 3, 75, 76,
        191, 242, 239, 187,
        2, 1, 0, 3,
        454, 455, 451, 450,
        418, 419, 415, 414,
        430, 431, 427, 426,
        404, 406, 407, 405,
        103, 164, 160, 99,
        9, 81, 140, 79,
        341, 342, 335, 333,
        115, 176, 172, 111,
        367, 368, 363, 362,
        28, 29, 24, 23,
        163, 221, 218, 159,
        170, 171, 167, 166,
        55, 57, 52, 50,
        52, 53, 48, 47,
        107, 168, 164, 103,
        204, 205, 201, 200,
        270, 271, 265, 263,
        203, 251, 248, 199,
        16, 15, 10, 11,
        45, 47, 42, 40,
        410, 402, 418, 414,
        286, 317, 313, 281,
        97, 98, 94, 93,
        406, 408, 409, 407,
        242, 243, 240, 239,
        419, 420, 416, 415,
        44, 112, 108, 39,
        185, 186, 182, 181,
        48, 49, 44, 43,
        508, 509, 505, 504,
        251, 252, 249, 248,
        160, 161, 157, 156,
        421, 482, 478, 417,
        129, 130, 126, 125,
        105, 106, 102, 101,
        77, 78, 73, 72,
        469, 471, 528, 527,
        498, 499, 495, 494,
        60, 62, 57, 55,
        372, 374, 399, 398,
        294, 295, 290, 289,
        147, 149, 206, 205,
        500, 501, 497, 496,
        62, 63, 58, 57,
        268, 267, 257, 258,
        86, 144, 145, 87,
        499, 500, 496, 495,
        427, 428, 424, 423,
        249, 250, 247, 246,
        353, 385, 381, 348,
        42, 43, 38, 37,
        43, 44, 39, 38,
        83, 85, 142, 141,
        425, 486, 482, 421,
        174, 175, 171, 170,
        458, 402, 403, 462,
        119, 180, 176, 115,
        104, 105, 101, 100,
        440, 441, 437, 436,
        265, 297, 298, 266,
        237, 238, 235, 234,
        123, 184, 180, 119,
        439, 440, 436, 435,
        465, 526, 522, 461,
        40, 42, 37, 35,
        456, 457, 453, 452,
        113, 114, 110, 109,
        297, 299, 300, 298,
        438, 439, 435, 434,
        150, 208, 209, 151,
        34, 104, 100, 29,
        516, 517, 513, 512,
        323, 324, 320, 319,
        482, 483, 479, 478,
        6, 8, 9, 7,
        352, 353, 348, 347,
        291, 321, 317, 286,
        145, 147, 205, 204,
        240, 241, 238, 237,
        161, 162, 158, 157,
        332, 334, 366, 364,
        311, 312, 308, 307,
        495, 496, 492, 491,
        337, 369, 370, 338,
        435, 436, 432, 431,
        4, 6, 7, 5,
        0, 4, 5, 3,
        178, 179, 175, 174,
        118, 119, 115, 114,
        116, 117, 113, 112,
        407, 409, 465, 464,
        431, 432, 428, 427,
        229, 232, 235, 214,
        326, 327, 323, 322,
        114, 115, 111, 110,
        245, 246, 243, 242,
        345, 344, 339, 340,
        504, 505, 501, 500,
        267, 269, 261, 257,
        318, 319, 315, 314,
        141, 142, 138, 137,
        120, 121, 117, 116,
        231, 232, 229, 228,
        236, 237, 234, 233,
        271, 305, 297, 265,
        527, 528, 524, 523,
        455, 456, 452, 451,
        415, 416, 412, 411,
        283, 282, 277, 278,
        471, 473, 529, 528,
        71, 70, 65, 66,
        262, 264, 295, 294,
        227, 228, 225, 224,
        154, 155, 150, 148,
        54, 120, 116, 49,
        14, 88, 80, 8,
        96, 97, 93, 92,
        448, 449, 445, 444,
        221, 222, 219, 218,
        285, 286, 281, 280,
        502, 503, 499, 498,
        8, 80, 81, 9,
        302, 304, 328, 327,
        241, 244, 247, 214,
        30, 32, 27, 25,
        511, 512, 508, 507,
        413, 474, 466, 408,
        296, 325, 321, 291,
        254, 255, 252, 251,
        180, 181, 177, 176,
        338, 370, 397, 368,
        371, 373, 374, 372,
        197, 198, 194, 193,
        418, 402, 426, 422,
        99, 160, 156, 95,
        378, 379, 373, 371,
        208, 210, 211, 209,
        172, 173, 169, 168,
        315, 316, 312, 311,
        512, 513, 509, 508,
        453, 514, 510, 449,
        280, 281, 276, 275,
        412, 413, 408, 406,
        246, 247, 244, 243,
        47, 48, 43, 42,
        405, 407, 464, 463,
        411, 412, 406, 404,
        354, 356, 351, 349,
        49, 116, 112, 44,
        90, 91, 86, 84,
        80, 82, 83, 81,
        325, 326, 322, 321,
        292, 294, 289, 287,
        68, 69, 64, 63,
        514, 515, 511, 510,
        91, 152, 144, 86,
        409, 467, 526, 465,
        20, 22, 17, 15,
        126, 127, 123, 122,
        423, 424, 420, 419,
        272, 274, 269, 267,
        33, 34, 29, 28,
        429, 490, 486, 425,
        98, 99, 95, 94,
        210, 212, 213, 211,
        346, 347, 342, 341,
        433, 494, 490, 429,
        330, 329, 332, 331,
        390, 391, 387, 386,
        84, 86, 87, 85,
        334, 336, 367, 366,
        37, 38, 33, 32,
        416, 417, 413, 412,
        63, 64, 59, 58,
        274, 275, 270, 269,
        339, 341, 333, 329,
        484, 485, 481, 480,
        216, 217, 212, 210,
        261, 263, 264, 262,
        128, 129, 125, 124,
        140, 141, 137, 136,
        88, 89, 82, 80,
        146, 148, 149, 147,
        57, 58, 53, 52,
        444, 445, 441, 440,
        306, 307, 301, 299,
        130, 131, 127, 126,
        127, 188, 184, 123,
        181, 182, 178, 177,
        189, 190, 186, 185,
        24, 96, 92, 19,
        468, 470, 471, 469,
        79, 140, 136, 74,
        445, 506, 502, 441,
        461, 522, 518, 457,
        336, 338, 368, 367,
        41, 40, 35, 36,
        51, 50, 45, 46,
        317, 318, 314, 313,
        143, 204, 200, 139,
        73, 74, 69, 68,
        422, 423, 419, 418,
        467, 469, 527, 526,
        162, 163, 159, 158,
        36, 35, 30, 31,
        426, 427, 423, 422,
        279, 280, 275, 274,
        360, 359, 354, 355,
        309, 310, 306, 305,
        488, 489, 485, 484,
        257, 261, 262, 260,
        17, 18, 13, 12,
        335, 337, 338, 336,
        198, 199, 195, 194,
        426, 402, 434, 430,
        366, 367, 362, 361,
        166, 167, 163, 162,
        64, 128, 124, 59,
        349, 351, 346, 344,
        136, 137, 133, 132,
        515, 516, 512, 511,
        31, 30, 25, 26,
        94, 95, 91, 90,
        524, 525, 521, 520,
        61, 60, 55, 56,
        222, 223, 220, 219,
        235, 238, 241, 214,
        510, 511, 507, 506,
        424, 425, 421, 420,
        219, 220, 217, 216,
        486, 487, 483, 482,
        109, 110, 106, 105,
        450, 451, 447, 446,
        179, 233, 230, 175,
        442, 402, 450, 446,
        299, 301, 302, 300,
        50, 52, 47, 45,
        75, 77, 72, 70,
        449, 510, 506, 445,
        56, 55, 50, 51,
        215, 216, 210, 208,
        93, 94, 90, 89,
        22, 23, 18, 17,
        230, 231, 228, 227,
        293, 292, 287, 288,
        101, 102, 98, 97,
        437, 498, 494, 433,
        492, 493, 489, 488,
        173, 174, 170, 169,
        462, 463, 459, 458,
        76, 75, 70, 71,
        528, 529, 525, 524,
        523, 524, 520, 519,
        122, 123, 119, 118,
        72, 73, 68, 67,
        476, 477, 472, 470,
        288, 287, 282, 283,
        207, 254, 251, 203,
        132, 133, 129, 128,
        301, 303, 304, 302,
        333, 335, 336, 334,
        451, 452, 448, 447,
        428, 429, 425, 424,
        35, 37, 32, 30,
        464, 465, 461, 460,
        165, 166, 162, 161,
        487, 488, 484, 483,
        307, 308, 303, 301,
        15, 17, 12, 10,
        195, 245, 242, 191,
        466, 468, 469, 467,
        373, 375, 376, 374,
        519, 520, 516, 515,
        74, 136, 132, 69,
        187, 239, 236, 183,
        359, 361, 356, 354,
        106, 107, 103, 102,
        434, 402, 442, 438,
        225, 226, 223, 222,
        85, 87, 143, 142,
        340, 339, 329, 330,
        520, 521, 517, 516,
        474, 475, 468, 466,
        522, 523, 519, 518,
        171, 227, 224, 167,
        29, 100, 96, 24,
        233, 234, 231, 230,
        253, 256, 213, 214,
        205, 206, 202, 201,
        494, 495, 491, 490,
        300, 302, 327, 326,
        190, 191, 187, 186,
        348, 347, 347, 342,
        342, 343, 343, 348,
        134, 135, 131, 130,
        18, 19, 14, 13,
        217, 220, 223, 214,
        81, 83, 141, 140,
        124, 125, 121, 120,
        239, 240, 237, 236,
        252, 253, 250, 249,
        11, 10, 0, 1,
        12, 13, 6, 4,
        183, 236, 233, 179,
        327, 328, 324, 323,
        363, 362, 362, 357,
        357, 358, 358, 363,
        59, 124, 120, 54,
        290, 291, 286, 285,
        82, 84, 85, 83,
        365, 364, 359, 360,
        342, 343, 337, 335,
        70, 72, 67, 65,
        186, 187, 183, 182,
        159, 218, 215, 155,
        211, 213, 256, 255,
        458, 459, 455, 454,
        112, 113, 109, 108,
        196, 197, 193, 192,
        377, 343, 343, 337,
        337, 369, 369, 377,
        378, 377, 377, 369,
        369, 371, 371, 378,
        408, 466, 467, 409,
        380, 379, 379, 373,
        373, 375, 375, 380,
        381, 348, 348, 343,
        343, 377, 377, 381,
        382, 381, 381, 377,
        377, 378, 378, 382,
        383, 382, 382, 378,
        378, 379, 379, 383,
        384, 383, 383, 379,
        379, 380, 380, 384,
        95, 156, 152, 91,
        386, 385, 385, 381,
        381, 382, 382, 386,
        157, 158, 154, 153,
        199, 248, 245, 195,
        167, 224, 221, 163,
        390, 389, 389, 385,
        385, 386, 386, 390,
        259, 260, 292, 293,
        287, 289, 284, 282,
        393, 363, 363, 358,
        358, 389, 389, 393,
        394, 393, 393, 389,
        389, 390, 390, 394,
        395, 394, 394, 390,
        390, 391, 391, 395,
        396, 395, 395, 391,
        391, 392, 392, 396,
        397, 368, 368, 363,
        363, 393, 393, 397,
        398, 397, 397, 393,
        393, 394, 394, 398,
        247, 250, 253, 214,
        400, 399, 399, 395,
        395, 396, 396, 400,
        276, 309, 305, 271,
        305, 306, 299, 297,
        142, 143, 139, 138,
        480, 481, 477, 476,
        361, 362, 357, 356,
        201, 202, 198, 197,
        310, 311, 307, 306,
        39, 108, 104, 34,
        282, 284, 279, 277,
        117, 118, 114, 113,
        319, 320, 316, 315,
        148, 150, 151, 149,
        507, 508, 504, 503,
        506, 507, 503, 502,
        25, 27, 22, 20,
        209, 211, 255, 254,
        224, 225, 222, 221,
        298, 300, 326, 325,
        102, 103, 99, 98,
        192, 193, 189, 188,
        351, 352, 347, 346,
        457, 518, 514, 453,
        188, 189, 185, 184,
        193, 194, 190, 189,
        491, 492, 488, 487,
        10, 12, 4, 0,
        410, 411, 404, 401,
        490, 491, 487, 486,
        277, 279, 274, 272,
        92, 93, 89, 88,
        169, 170, 166, 165,
        38, 39, 34, 33,
        202, 203, 199, 198,
        266, 298, 325, 296,
        452, 453, 449, 448,
        387, 388, 384, 383,
        177, 178, 174, 173,
        139, 200, 196, 135,
        414, 415, 411, 410,
        69, 132, 128, 64,
        370, 372, 398, 397,
        295, 296, 291, 290,
        374, 376, 400, 399,
        7, 9, 79, 78,
        329, 333, 334, 332,
        135, 196, 192, 131,
        175, 230, 227, 171,
        434, 435, 431, 430,
        243, 244, 241, 240,
        32, 33, 28, 27,
        450, 402, 458, 454,
        313, 314, 310, 309,
        284, 285, 280, 279,
        356, 357, 352, 351,
        248, 249, 246, 245,
        100, 101, 97, 96,
        19, 92, 88, 14,
        364, 366, 361, 359,
        503, 504, 500, 499,
        518, 519, 515, 514,
        152, 153, 146, 144,
        67, 68, 63, 62,
        149, 151, 207, 206,
        228, 229, 226, 225,
        121, 122, 118, 117,
        27, 28, 23, 22,
        206, 207, 203, 202,
        391, 392, 388, 387,
        358, 389, 385, 353,
        26, 25, 20, 21,
        23, 24, 19, 18,
        108, 109, 105, 104,
        182, 183, 179, 178,
        234, 235, 232, 231,
        475, 476, 470, 468,
        155, 215, 208, 150,
        278, 277, 272, 273,
        200, 201, 197, 196,
        87, 145, 204, 143,
        13, 14, 8, 6,
        460, 461, 457, 456,
        218, 219, 216, 215,
        213, 212, 217, 214,
        53, 54, 49, 48,
        131, 192, 188, 127,
        273, 272, 267, 268,
        369, 371, 372, 370,
        275, 276, 271, 270,
        66, 65, 60, 61,
        417, 478, 474, 413,
        403, 402, 410, 401,
        321, 322, 318, 317,
        401, 404, 405, 403,
        281, 313, 309, 276,
        194, 195, 191, 190,
        470, 472, 473, 471,
        446, 447, 443, 442,
        447, 448, 444, 443,
        478, 479, 475, 474,
        223, 226, 229, 214,
        496, 497, 493, 492,
        151, 209, 254, 207,
        386, 387, 383, 382,
        459, 460, 456, 455,
        125, 126, 122, 121,
        138, 139, 135, 134,
        153, 154, 148, 146,
        355, 354, 349, 350,
        65, 67, 62, 60,
        164, 165, 161, 160,
        322, 323, 319, 318,
        420, 421, 417, 416,
        264, 266, 296, 295,
        184, 185, 181, 180,
        176, 177, 173, 172,
        58, 59, 54, 53,
        443, 444, 440, 439,
        442, 443, 439, 438,
        331, 332, 364, 365,
        526, 527, 523, 522,
        432, 433, 429, 428,
        398, 399, 395, 394,
        110, 111, 107, 106,
        158, 159, 155, 154
};

static fix16_vector4_t __unused teapot_normals[] = {
        FIX16_VERTEX4(0.728000f, -0.670300f, -0.143800f, 1.0f),
        FIX16_VERTEX4(0.980900f, -0.022700f, -0.193300f, 1.0f),
        FIX16_VERTEX4(-0.795900f, -0.287700f, -0.532700f, 1.0f),
        FIX16_VERTEX4(-0.440200f, 0.611300f, -0.657700f, 1.0f),
        FIX16_VERTEX4(-0.007700f, 0.979300f, -0.202400f, 1.0f),
        FIX16_VERTEX4(-0.655500f, 0.667100f, 0.354100f, 1.0f),
        FIX16_VERTEX4(-0.973300f, 0.127300f, 0.190900f, 1.0f),
        FIX16_VERTEX4(-0.631700f, 0.650300f, 0.422000f, 1.0f),
        FIX16_VERTEX4(-0.572600f, 0.160100f, -0.804100f, 1.0f),
        FIX16_VERTEX4(-0.468900f, -0.878400f, 0.092600f, 1.0f),
        FIX16_VERTEX4(-0.777500f, 0.609800f, -0.153500f, 1.0f),
        FIX16_VERTEX4(-0.391700f, 0.870800f, -0.297000f, 1.0f),
        FIX16_VERTEX4(-0.852300f, 0.456000f, -0.256200f, 1.0f),
        FIX16_VERTEX4(0.440200f, 0.611300f, -0.657700f, 1.0f),
        FIX16_VERTEX4(-0.035700f, -0.982900f, -0.180800f, 1.0f),
        FIX16_VERTEX4(0.187500f, 0.251200f, 0.949600f, 1.0f),
        FIX16_VERTEX4(0.218200f, -0.506500f, 0.834200f, 1.0f),
        FIX16_VERTEX4(-0.102100f, -0.983000f, -0.152600f, 1.0f),
        FIX16_VERTEX4(-0.688000f, -0.560900f, 0.460500f, 1.0f),
        FIX16_VERTEX4(-0.198400f, 0.528000f, -0.825800f, 1.0f),
        FIX16_VERTEX4(-0.073000f, 0.977200f, 0.199500f, 1.0f),
        FIX16_VERTEX4(0.327600f, -0.942600f, 0.064700f, 1.0f),
        FIX16_VERTEX4(-0.532700f, -0.287700f, 0.795900f, 1.0f),
        FIX16_VERTEX4(-0.949600f, 0.251200f, -0.187500f, 1.0f),
        FIX16_VERTEX4(0.637000f, 0.737600f, -0.223900f, 1.0f),
        FIX16_VERTEX4(0.804400f, 0.251200f, -0.538400f, 1.0f),
        FIX16_VERTEX4(-0.185600f, -0.286600f, 0.939900f, 1.0f),
        FIX16_VERTEX4(-0.063700f, 0.997100f, 0.042600f, 1.0f),
        FIX16_VERTEX4(0.949600f, 0.251200f, -0.187500f, 1.0f),
        FIX16_VERTEX4(0.475300f, 0.519300f, 0.710200f, 1.0f),
        FIX16_VERTEX4(0.949600f, 0.251200f, 0.187500f, 1.0f),
        FIX16_VERTEX4(-0.190900f, 0.127300f, 0.973300f, 1.0f),
        FIX16_VERTEX4(-0.190900f, 0.127300f, -0.973300f, 1.0f),
        FIX16_VERTEX4(0.824800f, 0.128000f, -0.550800f, 1.0f),
        FIX16_VERTEX4(-0.747100f, 0.648400f, -0.146700f, 1.0f),
        FIX16_VERTEX4(0.187500f, 0.250300f, -0.949800f, 1.0f),
        FIX16_VERTEX4(-0.891700f, -0.417000f, 0.176100f, 1.0f),
        FIX16_VERTEX4(0.327200f, -0.319900f, -0.889200f, 1.0f),
        FIX16_VERTEX4(0.949800f, 0.250300f, -0.187500f, 1.0f),
        FIX16_VERTEX4(0.246200f, -0.330300f, 0.911200f, 1.0f),
        FIX16_VERTEX4(0.160600f, -0.558900f, -0.813500f, 1.0f),
        FIX16_VERTEX4(-0.165700f, 0.517800f, -0.839300f, 1.0f),
        FIX16_VERTEX4(0.413500f, 0.668800f, -0.617900f, 1.0f),
        FIX16_VERTEX4(-0.412000f, -0.671800f, -0.615600f, 1.0f),
        FIX16_VERTEX4(0.396000f, -0.879200f, 0.265100f, 1.0f),
        FIX16_VERTEX4(0.538400f, 0.251200f, -0.804400f, 1.0f),
        FIX16_VERTEX4(-0.657700f, 0.611300f, 0.440200f, 1.0f),
        FIX16_VERTEX4(-0.445500f, 0.206500f, -0.871100f, 1.0f),
        FIX16_VERTEX4(-0.475300f, 0.519300f, 0.710200f, 1.0f),
        FIX16_VERTEX4(0.538200f, 0.252100f, 0.804200f, 1.0f),
        FIX16_VERTEX4(-0.728000f, -0.670300f, -0.143800f, 1.0f),
        FIX16_VERTEX4(-0.053700f, -0.989800f, -0.132100f, 1.0f),
        FIX16_VERTEX4(0.946200f, 0.190000f, 0.261900f, 1.0f),
        FIX16_VERTEX4(-0.185600f, -0.286600f, -0.939900f, 1.0f),
        FIX16_VERTEX4(-0.980900f, -0.022700f, -0.193300f, 1.0f),
        FIX16_VERTEX4(0.144300f, 0.965800f, 0.215500f, 1.0f),
        FIX16_VERTEX4(-0.146700f, 0.648400f, -0.747100f, 1.0f),
        FIX16_VERTEX4(0.891700f, -0.417000f, -0.176100f, 1.0f),
        FIX16_VERTEX4(0.548700f, 0.751000f, 0.367200f, 1.0f),
        FIX16_VERTEX4(0.813200f, -0.559400f, 0.160600f, 1.0f),
        FIX16_VERTEX4(0.442500f, -0.846500f, 0.296200f, 1.0f),
        FIX16_VERTEX4(-0.144300f, 0.965800f, 0.215500f, 1.0f),
        FIX16_VERTEX4(-0.153500f, 0.609800f, -0.777500f, 1.0f),
        FIX16_VERTEX4(-0.064700f, -0.942600f, -0.327600f, 1.0f),
        FIX16_VERTEX4(0.185600f, -0.286600f, 0.939900f, 1.0f),
        FIX16_VERTEX4(0.532700f, -0.287700f, -0.795900f, 1.0f),
        FIX16_VERTEX4(-0.396000f, -0.879100f, 0.265100f, 1.0f),
        FIX16_VERTEX4(-0.180800f, -0.982900f, 0.035700f, 1.0f),
        FIX16_VERTEX4(0.163000f, -0.986100f, -0.032200f, 1.0f),
        FIX16_VERTEX4(-0.143700f, -0.670300f, -0.728000f, 1.0f),
        FIX16_VERTEX4(-0.558300f, -0.667200f, -0.493100f, 1.0f),
        FIX16_VERTEX4(-0.198400f, 0.528000f, 0.825800f, 1.0f),
        FIX16_VERTEX4(-0.649200f, 0.749700f, 0.128200f, 1.0f),
        FIX16_VERTEX4(0.523800f, -0.845500f, -0.103400f, 1.0f),
        FIX16_VERTEX4(0.092600f, -0.878400f, 0.468900f, 1.0f),
        FIX16_VERTEX4(-0.005200f, 0.591300f, -0.806500f, 1.0f),
        FIX16_VERTEX4(-0.949800f, 0.250300f, -0.187500f, 1.0f),
        FIX16_VERTEX4(0.180800f, -0.982900f, -0.035700f, 1.0f),
        FIX16_VERTEX4(0.422000f, 0.650300f, -0.631700f, 1.0f),
        FIX16_VERTEX4(-0.014900f, 0.997000f, 0.075500f, 1.0f),
        FIX16_VERTEX4(-0.428700f, 0.852500f, -0.299000f, 1.0f),
        FIX16_VERTEX4(0.474600f, -0.875300f, -0.092900f, 1.0f),
        FIX16_VERTEX4(0.813700f, -0.558600f, -0.160500f, 1.0f),
        FIX16_VERTEX4(-0.939900f, -0.286600f, 0.185600f, 1.0f),
        FIX16_VERTEX4(0.064700f, -0.942600f, -0.327600f, 1.0f),
        FIX16_VERTEX4(0.617900f, 0.668800f, -0.413500f, 1.0f),
        FIX16_VERTEX4(-0.132100f, -0.989800f, 0.053700f, 1.0f),
        FIX16_VERTEX4(0.949800f, 0.250300f, 0.187500f, 1.0f),
        FIX16_VERTEX4(0.514800f, -0.378700f, -0.769200f, 1.0f),
        FIX16_VERTEX4(0.980900f, -0.022700f, 0.193300f, 1.0f),
        FIX16_VERTEX4(-0.947700f, -0.182600f, -0.261900f, 1.0f),
        FIX16_VERTEX4(0.075500f, 0.997000f, 0.014900f, 1.0f),
        FIX16_VERTEX4(0.804400f, 0.251200f, 0.538400f, 1.0f),
        FIX16_VERTEX4(0.747100f, 0.648400f, 0.146700f, 1.0f),
        FIX16_VERTEX4(-0.276500f, -0.943000f, 0.185100f, 1.0f),
        FIX16_VERTEX4(-0.756500f, -0.637800f, 0.144600f, 1.0f),
        FIX16_VERTEX4(-0.193300f, -0.022700f, 0.980900f, 1.0f),
        FIX16_VERTEX4(0.939900f, -0.286600f, -0.185600f, 1.0f),
        FIX16_VERTEX4(-0.860300f, -0.443700f, -0.251100f, 1.0f),
        FIX16_VERTEX4(0.973300f, 0.127300f, 0.190900f, 1.0f),
        FIX16_VERTEX4(-0.839300f, 0.517800f, -0.165700f, 1.0f),
        FIX16_VERTEX4(0.505200f, -0.418400f, -0.754800f, 1.0f),
        FIX16_VERTEX4(0.103400f, -0.845500f, 0.523800f, 1.0f),
        FIX16_VERTEX4(0.289900f, 0.510400f, 0.809600f, 1.0f),
        FIX16_VERTEX4(-0.032200f, -0.986100f, -0.163000f, 1.0f),
        FIX16_VERTEX4(-0.813200f, -0.559400f, -0.160600f, 1.0f),
        FIX16_VERTEX4(-0.655500f, 0.667100f, -0.354100f, 1.0f),
        FIX16_VERTEX4(0.478100f, 0.095200f, 0.873200f, 1.0f),
        FIX16_VERTEX4(-0.777500f, 0.609800f, 0.153500f, 1.0f),
        FIX16_VERTEX4(0.063700f, 0.997100f, 0.042600f, 1.0f),
        FIX16_VERTEX4(-0.128200f, 0.749700f, -0.649200f, 1.0f),
        FIX16_VERTEX4(0.755500f, -0.601100f, 0.260500f, 1.0f),
        FIX16_VERTEX4(0.289900f, 0.510400f, -0.809600f, 1.0f),
        FIX16_VERTEX4(0.152600f, -0.983000f, -0.102100f, 1.0f),
        FIX16_VERTEX4(0.457900f, -0.829400f, -0.320100f, 1.0f),
        FIX16_VERTEX4(0.747100f, 0.648400f, -0.146700f, 1.0f),
        FIX16_VERTEX4(-0.468900f, -0.878400f, -0.092600f, 1.0f),
        FIX16_VERTEX4(0.728000f, -0.670300f, 0.143700f, 1.0f),
        FIX16_VERTEX4(0.730700f, 0.667300f, -0.144300f, 1.0f),
        FIX16_VERTEX4(0.974000f, -0.119400f, 0.192300f, 1.0f),
        FIX16_VERTEX4(0.908500f, -0.377400f, 0.179400f, 1.0f),
        FIX16_VERTEX4(-0.980900f, -0.022700f, 0.193300f, 1.0f),
        FIX16_VERTEX4(0.631700f, 0.650300f, -0.422000f, 1.0f),
        FIX16_VERTEX4(0.014200f, 0.999900f, -0.005800f, 1.0f),
        FIX16_VERTEX4(-0.395600f, -0.391900f, 0.830600f, 1.0f),
        FIX16_VERTEX4(0.974000f, -0.119400f, -0.192300f, 1.0f),
        FIX16_VERTEX4(0.050400f, 0.965500f, 0.255400f, 1.0f),
        FIX16_VERTEX4(-0.214800f, 0.391600f, -0.894700f, 1.0f),
        FIX16_VERTEX4(0.523800f, -0.845500f, 0.103400f, 1.0f),
        FIX16_VERTEX4(-0.050200f, 0.592700f, -0.803900f, 1.0f),
        FIX16_VERTEX4(0.637000f, 0.737600f, 0.223900f, 1.0f),
        FIX16_VERTEX4(-0.795900f, -0.287700f, 0.532700f, 1.0f),
        FIX16_VERTEX4(0.769200f, -0.378700f, 0.514800f, 1.0f),
        FIX16_VERTEX4(0.063700f, 0.997100f, -0.042600f, 1.0f),
        FIX16_VERTEX4(0.255400f, 0.965500f, 0.050400f, 1.0f),
        FIX16_VERTEX4(-0.478400f, -0.093700f, -0.873100f, 1.0f),
        FIX16_VERTEX4(-0.152600f, -0.983000f, 0.102100f, 1.0f),
        FIX16_VERTEX4(-0.146700f, 0.648400f, 0.747100f, 1.0f),
        FIX16_VERTEX4(-0.422000f, 0.650300f, -0.631700f, 1.0f),
        FIX16_VERTEX4(0.010300f, -0.979300f, 0.202400f, 1.0f),
        FIX16_VERTEX4(-0.523800f, -0.845500f, 0.103400f, 1.0f),
        FIX16_VERTEX4(0.538200f, 0.252200f, -0.804200f, 1.0f),
        FIX16_VERTEX4(-0.305000f, 0.928900f, 0.210100f, 1.0f),
        FIX16_VERTEX4(0.144300f, 0.965800f, -0.215500f, 1.0f),
        FIX16_VERTEX4(-0.617900f, 0.668800f, -0.413500f, 1.0f),
        FIX16_VERTEX4(0.754800f, -0.418400f, 0.505200f, 1.0f),
        FIX16_VERTEX4(-0.754800f, -0.418400f, -0.505200f, 1.0f),
        FIX16_VERTEX4(-0.179400f, -0.377400f, -0.908500f, 1.0f),
        FIX16_VERTEX4(0.555800f, -0.022100f, 0.831000f, 1.0f),
        FIX16_VERTEX4(-0.050400f, 0.965500f, -0.255400f, 1.0f),
        FIX16_VERTEX4(0.905200f, -0.333700f, 0.263100f, 1.0f),
        FIX16_VERTEX4(0.163000f, -0.986100f, 0.032200f, 1.0f),
        FIX16_VERTEX4(-0.891700f, -0.417000f, -0.176100f, 1.0f),
        FIX16_VERTEX4(-0.520100f, -0.830600f, 0.198900f, 1.0f),
        FIX16_VERTEX4(0.005800f, 0.999900f, 0.014200f, 1.0f),
        FIX16_VERTEX4(-0.463800f, -0.554100f, 0.691200f, 1.0f),
        FIX16_VERTEX4(0.102100f, -0.983000f, 0.152600f, 1.0f),
        FIX16_VERTEX4(-0.276500f, -0.943000f, -0.185100f, 1.0f),
        FIX16_VERTEX4(-0.478400f, -0.093700f, 0.873100f, 1.0f),
        FIX16_VERTEX4(-0.215500f, 0.965800f, 0.144300f, 1.0f),
        FIX16_VERTEX4(0.777500f, 0.609800f, 0.153500f, 1.0f),
        FIX16_VERTEX4(0.457900f, -0.829400f, 0.320100f, 1.0f),
        FIX16_VERTEX4(-0.558300f, -0.667200f, 0.493100f, 1.0f),
        FIX16_VERTEX4(-0.128200f, 0.749700f, 0.649200f, 1.0f),
        FIX16_VERTEX4(0.053700f, -0.989800f, -0.132100f, 1.0f),
        FIX16_VERTEX4(-0.187500f, 0.250300f, -0.949800f, 1.0f),
        FIX16_VERTEX4(-0.075600f, -0.808900f, 0.583000f, 1.0f),
        FIX16_VERTEX4(-0.255400f, 0.965500f, -0.050400f, 1.0f),
        FIX16_VERTEX4(0.657700f, 0.611300f, -0.440200f, 1.0f),
        FIX16_VERTEX4(0.472100f, 0.857100f, -0.206200f, 1.0f),
        FIX16_VERTEX4(0.296200f, -0.846500f, 0.442500f, 1.0f),
        FIX16_VERTEX4(0.064700f, -0.942600f, 0.327600f, 1.0f),
        FIX16_VERTEX4(0.905200f, -0.333700f, -0.263100f, 1.0f),
        FIX16_VERTEX4(-0.831000f, -0.022100f, -0.555800f, 1.0f),
        FIX16_VERTEX4(0.014900f, 0.997000f, 0.075500f, 1.0f),
        FIX16_VERTEX4(0.468900f, -0.878400f, 0.092600f, 1.0f),
        FIX16_VERTEX4(-0.747100f, 0.648400f, 0.146700f, 1.0f),
        FIX16_VERTEX4(-0.631700f, 0.650300f, -0.422000f, 1.0f),
        FIX16_VERTEX4(-0.864100f, 0.444700f, 0.235800f, 1.0f),
        FIX16_VERTEX4(0.891700f, -0.417000f, 0.176100f, 1.0f),
        FIX16_VERTEX4(-0.825000f, -0.119900f, -0.552200f, 1.0f),
        FIX16_VERTEX4(-0.908500f, -0.377400f, -0.179400f, 1.0f),
        FIX16_VERTEX4(-0.439300f, -0.245000f, 0.864300f, 1.0f),
        FIX16_VERTEX4(-0.050200f, 0.592700f, 0.803900f, 1.0f),
        FIX16_VERTEX4(-0.160600f, -0.559400f, 0.813200f, 1.0f),
        FIX16_VERTEX4(0.032200f, -0.986100f, 0.163000f, 1.0f),
        FIX16_VERTEX4(-0.804400f, 0.251200f, -0.538400f, 1.0f),
        FIX16_VERTEX4(-0.327600f, -0.942600f, 0.064700f, 1.0f),
        FIX16_VERTEX4(0.143800f, -0.670300f, 0.728000f, 1.0f),
        FIX16_VERTEX4(0.552200f, -0.119900f, 0.825000f, 1.0f),
        FIX16_VERTEX4(0.146700f, 0.648400f, -0.747100f, 1.0f),
        FIX16_VERTEX4(0.056600f, -0.589500f, -0.805800f, 1.0f),
        FIX16_VERTEX4(0.461400f, -0.558500f, -0.689400f, 1.0f),
        FIX16_VERTEX4(0.185100f, -0.943000f, -0.276500f, 1.0f),
        FIX16_VERTEX4(-0.192300f, -0.119400f, -0.974000f, 1.0f),
        FIX16_VERTEX4(-0.075500f, 0.997000f, -0.014900f, 1.0f),
        FIX16_VERTEX4(-0.527700f, 0.010400f, -0.849400f, 1.0f),
        FIX16_VERTEX4(0.276500f, -0.943000f, -0.185100f, 1.0f),
        FIX16_VERTEX4(0.224600f, -0.925300f, -0.305700f, 1.0f),
        FIX16_VERTEX4(0.211900f, -0.965600f, -0.150600f, 1.0f),
        FIX16_VERTEX4(-0.974000f, -0.119400f, -0.192300f, 1.0f),
        FIX16_VERTEX4(0.896000f, -0.347500f, 0.276300f, 1.0f),
        FIX16_VERTEX4(0.411300f, -0.869400f, -0.273900f, 1.0f),
        FIX16_VERTEX4(-0.555800f, -0.022100f, -0.831000f, 1.0f),
        FIX16_VERTEX4(0.160600f, -0.559400f, 0.813200f, 1.0f),
        FIX16_VERTEX4(0.218200f, -0.506500f, -0.834200f, 1.0f),
        FIX16_VERTEX4(0.239900f, -0.393200f, -0.887600f, 1.0f),
        FIX16_VERTEX4(-0.103400f, -0.845500f, -0.523800f, 1.0f),
        FIX16_VERTEX4(-0.063700f, 0.997100f, -0.042600f, 1.0f),
        FIX16_VERTEX4(-0.305000f, 0.928900f, -0.210100f, 1.0f),
        FIX16_VERTEX4(0.179400f, -0.377400f, 0.908500f, 1.0f),
        FIX16_VERTEX4(-0.769200f, -0.378700f, 0.514800f, 1.0f),
        FIX16_VERTEX4(-0.769200f, -0.378700f, -0.514800f, 1.0f),
        FIX16_VERTEX4(-0.649200f, 0.749700f, -0.128200f, 1.0f),
        FIX16_VERTEX4(0.265100f, -0.879200f, 0.396000f, 1.0f),
        FIX16_VERTEX4(0.831000f, -0.022100f, 0.555800f, 1.0f),
        FIX16_VERTEX4(-0.395600f, -0.391900f, -0.830600f, 1.0f),
        FIX16_VERTEX4(0.192300f, -0.119400f, 0.974000f, 1.0f),
        FIX16_VERTEX4(0.538400f, 0.251200f, 0.804400f, 1.0f),
        FIX16_VERTEX4(0.649200f, 0.749700f, 0.128200f, 1.0f),
        FIX16_VERTEX4(0.367200f, 0.751000f, 0.548700f, 1.0f),
        FIX16_VERTEX4(-0.176100f, -0.417000f, -0.891700f, 1.0f),
        FIX16_VERTEX4(-0.180800f, -0.982900f, -0.035700f, 1.0f),
        FIX16_VERTEX4(-0.754800f, -0.418400f, 0.505200f, 1.0f),
        FIX16_VERTEX4(0.276500f, -0.943000f, 0.185100f, 1.0f),
        FIX16_VERTEX4(-0.185100f, -0.943000f, 0.276500f, 1.0f),
        FIX16_VERTEX4(0.727700f, -0.569600f, 0.382200f, 1.0f),
        FIX16_VERTEX4(-0.940400f, 0.294600f, 0.170200f, 1.0f),
        FIX16_VERTEX4(-0.804200f, 0.252100f, -0.538200f, 1.0f),
        FIX16_VERTEX4(0.815400f, 0.520800f, 0.252800f, 1.0f),
        FIX16_VERTEX4(-0.804400f, 0.251200f, 0.538400f, 1.0f),
        FIX16_VERTEX4(-0.460500f, -0.560900f, 0.688000f, 1.0f),
        FIX16_VERTEX4(0.190900f, 0.127300f, -0.973300f, 1.0f),
        FIX16_VERTEX4(-0.163000f, -0.986100f, 0.032200f, 1.0f),
        FIX16_VERTEX4(-0.144300f, 0.667300f, -0.730700f, 1.0f),
        FIX16_VERTEX4(-0.779900f, 0.382400f, 0.495500f, 1.0f),
        FIX16_VERTEX4(0.550800f, 0.128000f, -0.824800f, 1.0f),
        FIX16_VERTEX4(0.410700f, -0.883000f, -0.227200f, 1.0f),
        FIX16_VERTEX4(-0.214800f, 0.391600f, 0.894700f, 1.0f),
        FIX16_VERTEX4(0.429100f, 0.260600f, -0.864900f, 1.0f),
        FIX16_VERTEX4(0.103400f, -0.845500f, -0.523800f, 1.0f),
        FIX16_VERTEX4(-0.073000f, 0.977200f, -0.199500f, 1.0f),
        FIX16_VERTEX4(-0.265100f, -0.879200f, -0.396000f, 1.0f),
        FIX16_VERTEX4(0.727700f, -0.569600f, -0.382200f, 1.0f),
        FIX16_VERTEX4(-0.144300f, 0.667300f, 0.730700f, 1.0f),
        FIX16_VERTEX4(0.132100f, -0.989800f, -0.053700f, 1.0f),
        FIX16_VERTEX4(0.327200f, -0.319900f, 0.889200f, 1.0f),
        FIX16_VERTEX4(0.144300f, 0.667300f, -0.730700f, 1.0f),
        FIX16_VERTEX4(0.176100f, -0.417000f, 0.891700f, 1.0f),
        FIX16_VERTEX4(-0.864100f, 0.444700f, -0.235800f, 1.0f),
        FIX16_VERTEX4(-0.514800f, -0.378700f, 0.769200f, 1.0f),
        FIX16_VERTEX4(0.035700f, -0.982900f, 0.180800f, 1.0f),
        FIX16_VERTEX4(-0.515700f, 0.385200f, 0.765300f, 1.0f),
        FIX16_VERTEX4(-0.552200f, -0.119900f, -0.825000f, 1.0f),
        FIX16_VERTEX4(-0.296100f, -0.846500f, 0.442500f, 1.0f),
        FIX16_VERTEX4(-0.187500f, 0.251200f, -0.949600f, 1.0f),
        FIX16_VERTEX4(-0.014900f, 0.997000f, -0.075500f, 1.0f),
        FIX16_VERTEX4(0.014200f, 0.999900f, 0.005800f, 1.0f),
        FIX16_VERTEX4(0.092000f, -0.986200f, 0.137500f, 1.0f),
        FIX16_VERTEX4(0.193300f, -0.022700f, -0.980900f, 1.0f),
        FIX16_VERTEX4(-0.042600f, 0.997100f, -0.063700f, 1.0f),
        FIX16_VERTEX4(0.032200f, -0.986100f, -0.163000f, 1.0f),
        FIX16_VERTEX4(0.795900f, -0.287700f, -0.532700f, 1.0f),
        FIX16_VERTEX4(0.190900f, 0.127300f, 0.973300f, 1.0f),
        FIX16_VERTEX4(0.839300f, 0.517800f, -0.165700f, 1.0f),
        FIX16_VERTEX4(0.053700f, -0.989800f, 0.132100f, 1.0f),
        FIX16_VERTEX4(-0.722000f, -0.656600f, -0.218000f, 1.0f),
        FIX16_VERTEX4(-0.615600f, -0.671800f, -0.412000f, 1.0f),
        FIX16_VERTEX4(0.615600f, -0.671800f, -0.412000f, 1.0f),
        FIX16_VERTEX4(0.185100f, -0.943000f, 0.276500f, 1.0f),
        FIX16_VERTEX4(-0.538200f, 0.252100f, -0.804200f, 1.0f),
        FIX16_VERTEX4(-0.215500f, 0.965800f, -0.144300f, 1.0f),
        FIX16_VERTEX4(-0.532700f, -0.287700f, -0.795900f, 1.0f),
        FIX16_VERTEX4(-0.092600f, -0.878400f, -0.468900f, 1.0f),
        FIX16_VERTEX4(0.215500f, 0.965800f, -0.144300f, 1.0f),
        FIX16_VERTEX4(-0.005200f, 0.591300f, 0.806500f, 1.0f),
        FIX16_VERTEX4(0.185600f, -0.286600f, -0.939900f, 1.0f),
        FIX16_VERTEX4(0.327600f, -0.942600f, -0.064700f, 1.0f),
        FIX16_VERTEX4(0.296200f, -0.846500f, -0.442500f, 1.0f),
        FIX16_VERTEX4(0.548700f, 0.751000f, -0.367200f, 1.0f),
        FIX16_VERTEX4(-0.824800f, 0.128000f, 0.550800f, 1.0f),
        FIX16_VERTEX4(0.804200f, 0.252200f, -0.538200f, 1.0f),
        FIX16_VERTEX4(-0.442500f, -0.846500f, 0.296100f, 1.0f),
        FIX16_VERTEX4(-0.102100f, -0.983000f, 0.152600f, 1.0f),
        FIX16_VERTEX4(0.825000f, -0.119900f, 0.552200f, 1.0f),
        FIX16_VERTEX4(-0.265100f, -0.879100f, 0.396000f, 1.0f),
        FIX16_VERTEX4(-0.442500f, -0.846500f, -0.296200f, 1.0f),
        FIX16_VERTEX4(0.005800f, -0.591300f, 0.806500f, 1.0f),
        FIX16_VERTEX4(-0.710200f, 0.519300f, 0.475300f, 1.0f),
        FIX16_VERTEX4(-0.179400f, -0.377400f, 0.908500f, 1.0f),
        FIX16_VERTEX4(-0.520100f, -0.830600f, -0.198900f, 1.0f),
        FIX16_VERTEX4(0.896000f, -0.347500f, -0.276300f, 1.0f),
        FIX16_VERTEX4(0.146700f, 0.648400f, 0.747100f, 1.0f),
        FIX16_VERTEX4(0.555800f, -0.022100f, -0.831000f, 1.0f),
        FIX16_VERTEX4(-0.693700f, -0.558200f, 0.455200f, 1.0f),
        FIX16_VERTEX4(-0.831000f, -0.022100f, 0.555800f, 1.0f),
        FIX16_VERTEX4(0.128200f, 0.749700f, -0.649200f, 1.0f),
        FIX16_VERTEX4(0.035700f, -0.982900f, -0.180800f, 1.0f),
        FIX16_VERTEX4(-0.304200f, -0.508700f, -0.805400f, 1.0f),
        FIX16_VERTEX4(0.412000f, -0.671700f, 0.615600f, 1.0f),
        FIX16_VERTEX4(0.165700f, 0.517800f, 0.839300f, 1.0f),
        FIX16_VERTEX4(-0.163000f, -0.986100f, -0.032200f, 1.0f),
        FIX16_VERTEX4(-0.605700f, 0.637700f, 0.475900f, 1.0f),
        FIX16_VERTEX4(-0.035700f, -0.982900f, 0.180800f, 1.0f),
        FIX16_VERTEX4(-0.505200f, -0.418400f, 0.754800f, 1.0f),
        FIX16_VERTEX4(0.710200f, 0.519300f, 0.475300f, 1.0f),
        FIX16_VERTEX4(-0.572600f, 0.160100f, 0.804100f, 1.0f),
        FIX16_VERTEX4(0.552200f, -0.119900f, -0.825000f, 1.0f),
        FIX16_VERTEX4(0.132100f, -0.989800f, 0.053700f, 1.0f),
        FIX16_VERTEX4(0.014900f, 0.997000f, -0.075500f, 1.0f),
        FIX16_VERTEX4(-0.974000f, -0.119400f, 0.192300f, 1.0f),
        FIX16_VERTEX4(0.067700f, -0.420400f, -0.904800f, 1.0f),
        FIX16_VERTEX4(-0.103400f, -0.845500f, 0.523800f, 1.0f),
        FIX16_VERTEX4(-0.137500f, -0.986200f, -0.092000f, 1.0f),
        FIX16_VERTEX4(-0.092000f, -0.986200f, 0.137500f, 1.0f),
        FIX16_VERTEX4(0.475300f, 0.519300f, -0.710200f, 1.0f),
        FIX16_VERTEX4(0.176100f, -0.417000f, -0.891700f, 1.0f),
        FIX16_VERTEX4(0.255400f, 0.965500f, -0.050400f, 1.0f),
        FIX16_VERTEX4(-0.014200f, 0.999900f, 0.005800f, 1.0f),
        FIX16_VERTEX4(-0.548700f, 0.751000f, 0.367200f, 1.0f),
        FIX16_VERTEX4(0.137500f, -0.986200f, -0.092000f, 1.0f),
        FIX16_VERTEX4(-0.722000f, -0.656600f, 0.218000f, 1.0f),
        FIX16_VERTEX4(0.413500f, 0.668800f, 0.617900f, 1.0f),
        FIX16_VERTEX4(-0.334200f, 0.257200f, -0.906700f, 1.0f),
        FIX16_VERTEX4(-0.221100f, 0.067100f, -0.972900f, 1.0f),
        FIX16_VERTEX4(-0.192300f, -0.119400f, 0.974000f, 1.0f),
        FIX16_VERTEX4(-0.460500f, -0.560900f, -0.688000f, 1.0f),
        FIX16_VERTEX4(-0.005800f, 0.999900f, -0.014200f, 1.0f),
        FIX16_VERTEX4(-0.908500f, -0.377400f, 0.179400f, 1.0f),
        FIX16_VERTEX4(0.514800f, -0.378700f, 0.769200f, 1.0f),
        FIX16_VERTEX4(0.215500f, 0.965800f, 0.144300f, 1.0f),
        FIX16_VERTEX4(-0.042600f, 0.997100f, 0.063700f, 1.0f),
        FIX16_VERTEX4(0.804200f, 0.252100f, 0.538200f, 1.0f),
        FIX16_VERTEX4(-0.396000f, -0.879200f, -0.265100f, 1.0f),
        FIX16_VERTEX4(0.839300f, 0.517800f, 0.165700f, 1.0f),
        FIX16_VERTEX4(-0.304200f, -0.508700f, 0.805400f, 1.0f),
        FIX16_VERTEX4(-0.356900f, 0.200400f, 0.912400f, 1.0f),
        FIX16_VERTEX4(-0.219600f, 0.134600f, 0.966300f, 1.0f),
        FIX16_VERTEX4(0.505200f, -0.418400f, 0.754800f, 1.0f),
        FIX16_VERTEX4(0.452400f, -0.181100f, 0.873200f, 1.0f),
        FIX16_VERTEX4(-0.939900f, -0.286600f, -0.185600f, 1.0f),
        FIX16_VERTEX4(0.067700f, -0.420400f, 0.904800f, 1.0f),
        FIX16_VERTEX4(0.246200f, -0.330300f, -0.911200f, 1.0f),
        FIX16_VERTEX4(0.412000f, -0.671800f, -0.615600f, 1.0f),
        FIX16_VERTEX4(0.617900f, 0.668800f, 0.413500f, 1.0f),
        FIX16_VERTEX4(-0.475300f, 0.519300f, -0.710200f, 1.0f),
        FIX16_VERTEX4(-0.075500f, 0.997000f, 0.014900f, 1.0f),
        FIX16_VERTEX4(-0.550800f, 0.128000f, 0.824800f, 1.0f),
        FIX16_VERTEX4(0.908500f, -0.377400f, -0.179400f, 1.0f),
        FIX16_VERTEX4(-0.153500f, 0.609800f, 0.777500f, 1.0f),
        FIX16_VERTEX4(0.185200f, -0.549400f, -0.814800f, 1.0f),
        FIX16_VERTEX4(0.179900f, -0.488800f, -0.853700f, 1.0f),
        FIX16_VERTEX4(0.111200f, -0.876400f, -0.468500f, 1.0f),
        FIX16_VERTEX4(0.110400f, -0.892200f, -0.437900f, 1.0f),
        FIX16_VERTEX4(-0.327600f, -0.942600f, -0.064700f, 1.0f),
        FIX16_VERTEX4(-0.176500f, 0.108900f, 0.978300f, 1.0f),
        FIX16_VERTEX4(-0.199900f, 0.067300f, 0.977500f, 1.0f),
        FIX16_VERTEX4(-0.213000f, 0.276200f, -0.937200f, 1.0f),
        FIX16_VERTEX4(-0.196000f, 0.141100f, -0.970400f, 1.0f),
        FIX16_VERTEX4(-0.144700f, -0.597200f, -0.788900f, 1.0f),
        FIX16_VERTEX4(-0.090500f, -0.757500f, -0.646600f, 1.0f),
        FIX16_VERTEX4(0.107400f, -0.901400f, 0.419500f, 1.0f),
        FIX16_VERTEX4(0.105900f, -0.903200f, 0.416000f, 1.0f),
        FIX16_VERTEX4(0.166700f, -0.517900f, 0.839100f, 1.0f),
        FIX16_VERTEX4(0.171800f, -0.514600f, 0.840100f, 1.0f),
        FIX16_VERTEX4(-0.538400f, 0.251200f, -0.804400f, 1.0f),
        FIX16_VERTEX4(-0.715700f, 0.445300f, -0.538100f, 1.0f),
        FIX16_VERTEX4(-0.761300f, 0.137500f, -0.633700f, 1.0f),
        FIX16_VERTEX4(-0.367200f, 0.751000f, -0.548700f, 1.0f),
        FIX16_VERTEX4(-0.165700f, 0.517800f, 0.839300f, 1.0f),
        FIX16_VERTEX4(0.165700f, 0.517800f, -0.839300f, 1.0f),
        FIX16_VERTEX4(-0.781700f, 0.195600f, 0.592300f, 1.0f),
        FIX16_VERTEX4(-0.697000f, 0.433600f, 0.571100f, 1.0f),
        FIX16_VERTEX4(-0.007700f, 0.979300f, 0.202400f, 1.0f),
        FIX16_VERTEX4(0.056600f, -0.589500f, 0.805800f, 1.0f),
        FIX16_VERTEX4(-0.217800f, 0.185700f, 0.958200f, 1.0f),
        FIX16_VERTEX4(-0.194300f, 0.235900f, 0.952200f, 1.0f),
        FIX16_VERTEX4(-0.117500f, -0.736000f, 0.666700f, 1.0f),
        FIX16_VERTEX4(-0.119700f, -0.613400f, 0.780600f, 1.0f),
        FIX16_VERTEX4(0.106700f, -0.903400f, -0.415300f, 1.0f),
        FIX16_VERTEX4(0.106700f, -0.900700f, -0.421100f, 1.0f),
        FIX16_VERTEX4(0.167400f, -0.507400f, -0.845300f, 1.0f),
        FIX16_VERTEX4(0.170500f, -0.525900f, -0.833300f, 1.0f),
        FIX16_VERTEX4(0.191100f, -0.506200f, 0.840900f, 1.0f),
        FIX16_VERTEX4(0.175500f, -0.533900f, 0.827100f, 1.0f),
        FIX16_VERTEX4(0.106700f, -0.889400f, 0.444600f, 1.0f),
        FIX16_VERTEX4(0.114800f, -0.877900f, 0.464900f, 1.0f),
        FIX16_VERTEX4(-0.005800f, 0.999900f, 0.014200f, 1.0f),
        FIX16_VERTEX4(-0.174800f, 0.033600f, -0.984000f, 1.0f),
        FIX16_VERTEX4(-0.198100f, 0.151700f, -0.968400f, 1.0f),
        FIX16_VERTEX4(0.478100f, 0.095200f, -0.873200f, 1.0f),
        FIX16_VERTEX4(-0.439300f, -0.245000f, -0.864300f, 1.0f),
        FIX16_VERTEX4(-0.825000f, -0.119900f, 0.552200f, 1.0f),
        FIX16_VERTEX4(-0.296200f, -0.846500f, -0.442500f, 1.0f),
        FIX16_VERTEX4(-0.527700f, 0.010400f, 0.849400f, 1.0f),
        FIX16_VERTEX4(-0.367200f, 0.751000f, 0.548700f, 1.0f),
        FIX16_VERTEX4(0.373400f, 0.407500f, -0.833400f, 1.0f),
        FIX16_VERTEX4(0.754800f, -0.418400f, -0.505200f, 1.0f),
        FIX16_VERTEX4(0.100400f, -0.974100f, 0.202700f, 1.0f),
        FIX16_VERTEX4(0.939900f, -0.286600f, 0.185600f, 1.0f),
        FIX16_VERTEX4(0.472100f, 0.857100f, 0.206200f, 1.0f),
        FIX16_VERTEX4(-0.730700f, 0.667300f, -0.144300f, 1.0f),
        FIX16_VERTEX4(0.152600f, -0.983000f, 0.102100f, 1.0f),
        FIX16_VERTEX4(0.137500f, -0.986200f, 0.092000f, 1.0f),
        FIX16_VERTEX4(-0.144300f, -0.651900f, 0.744500f, 1.0f),
        FIX16_VERTEX4(-0.255400f, 0.965500f, 0.050400f, 1.0f),
        FIX16_VERTEX4(0.050400f, 0.965500f, -0.255400f, 1.0f),
        FIX16_VERTEX4(-0.860300f, -0.443700f, 0.251100f, 1.0f),
        FIX16_VERTEX4(0.192300f, -0.119400f, -0.974000f, 1.0f),
        FIX16_VERTEX4(0.153500f, 0.609800f, 0.777500f, 1.0f),
        FIX16_VERTEX4(-0.920300f, 0.282500f, -0.270800f, 1.0f),
        FIX16_VERTEX4(-0.064700f, -0.942600f, 0.327600f, 1.0f),
        FIX16_VERTEX4(0.440200f, 0.611300f, 0.657700f, 1.0f),
        FIX16_VERTEX4(0.128200f, 0.749700f, 0.649200f, 1.0f),
        FIX16_VERTEX4(0.102100f, -0.983000f, -0.152600f, 1.0f),
        FIX16_VERTEX4(0.615600f, -0.671800f, 0.412000f, 1.0f),
        FIX16_VERTEX4(-0.824800f, 0.128000f, -0.550800f, 1.0f),
        FIX16_VERTEX4(0.092000f, -0.986200f, -0.137500f, 1.0f),
        FIX16_VERTEX4(0.100400f, -0.974100f, -0.202700f, 1.0f),
        FIX16_VERTEX4(-0.514800f, -0.378700f, -0.769200f, 1.0f),
        FIX16_VERTEX4(0.367200f, 0.751000f, -0.548700f, 1.0f),
        FIX16_VERTEX4(0.689400f, -0.558600f, -0.461200f, 1.0f),
        FIX16_VERTEX4(-0.413500f, 0.668800f, 0.617900f, 1.0f),
        FIX16_VERTEX4(-0.947700f, -0.182600f, 0.261900f, 1.0f),
        FIX16_VERTEX4(0.193300f, -0.022700f, 0.980900f, 1.0f),
        FIX16_VERTEX4(0.358700f, -0.892500f, 0.273400f, 1.0f),
        FIX16_VERTEX4(0.649200f, 0.749700f, -0.128200f, 1.0f),
        FIX16_VERTEX4(-0.538400f, 0.251200f, 0.804400f, 1.0f),
        FIX16_VERTEX4(-0.550800f, 0.128000f, -0.824800f, 1.0f),
        FIX16_VERTEX4(-0.176100f, -0.417000f, 0.891700f, 1.0f),
        FIX16_VERTEX4(0.245900f, -0.953400f, 0.175000f, 1.0f),
        FIX16_VERTEX4(-0.445500f, 0.206500f, 0.871100f, 1.0f),
        FIX16_VERTEX4(-0.605700f, 0.637700f, -0.475900f, 1.0f),
        FIX16_VERTEX4(-0.813200f, -0.559400f, 0.160600f, 1.0f),
        FIX16_VERTEX4(0.755500f, -0.601100f, -0.260500f, 1.0f),
        FIX16_VERTEX4(-0.187500f, 0.250300f, 0.949800f, 1.0f),
        FIX16_VERTEX4(0.710200f, 0.519300f, -0.475300f, 1.0f),
        FIX16_VERTEX4(0.973300f, 0.127300f, -0.190900f, 1.0f),
        FIX16_VERTEX4(0.042600f, 0.997100f, 0.063700f, 1.0f),
        FIX16_VERTEX4(0.275300f, -0.869000f, -0.411100f, 1.0f),
        FIX16_VERTEX4(-0.053700f, -0.989800f, 0.132100f, 1.0f),
        FIX16_VERTEX4(0.815400f, 0.520800f, -0.252800f, 1.0f),
        FIX16_VERTEX4(0.410700f, -0.883000f, 0.227200f, 1.0f),
        FIX16_VERTEX4(-0.920300f, 0.282500f, 0.270800f, 1.0f),
        FIX16_VERTEX4(-0.050400f, 0.965500f, 0.255400f, 1.0f),
        FIX16_VERTEX4(0.179400f, -0.377400f, -0.908500f, 1.0f),
        FIX16_VERTEX4(-0.505200f, -0.418400f, -0.754800f, 1.0f),
        FIX16_VERTEX4(0.239900f, -0.393200f, 0.887600f, 1.0f),
        FIX16_VERTEX4(0.180800f, -0.982900f, 0.035700f, 1.0f),
        FIX16_VERTEX4(-0.032200f, -0.986100f, 0.163000f, 1.0f),
        FIX16_VERTEX4(-0.657700f, 0.611300f, -0.440200f, 1.0f),
        FIX16_VERTEX4(-0.092600f, -0.878400f, 0.468900f, 1.0f),
        FIX16_VERTEX4(-0.730700f, 0.667300f, 0.144300f, 1.0f),
        FIX16_VERTEX4(0.042600f, 0.997100f, -0.063700f, 1.0f),
        FIX16_VERTEX4(0.795900f, -0.287700f, 0.532700f, 1.0f),
        FIX16_VERTEX4(0.092800f, -0.876600f, -0.472200f, 1.0f),
        FIX16_VERTEX4(-0.617900f, 0.668800f, 0.413500f, 1.0f),
        FIX16_VERTEX4(0.358700f, -0.892500f, -0.273400f, 1.0f),
        FIX16_VERTEX4(-0.428700f, 0.852500f, 0.299000f, 1.0f),
        FIX16_VERTEX4(-0.177700f, 0.275900f, 0.944600f, 1.0f),
        FIX16_VERTEX4(-0.160600f, -0.559400f, -0.813200f, 1.0f),
        FIX16_VERTEX4(0.769200f, -0.378700f, -0.514800f, 1.0f),
        FIX16_VERTEX4(0.730700f, 0.667300f, 0.144300f, 1.0f),
        FIX16_VERTEX4(0.075500f, 0.997000f, -0.014900f, 1.0f),
        FIX16_VERTEX4(-0.152600f, -0.983000f, -0.102100f, 1.0f),
        FIX16_VERTEX4(-0.710200f, 0.519300f, -0.475300f, 1.0f),
        FIX16_VERTEX4(0.010300f, -0.979300f, -0.202400f, 1.0f),
        FIX16_VERTEX4(-0.440200f, 0.611300f, 0.657700f, 1.0f),
        FIX16_VERTEX4(-0.949800f, 0.250300f, 0.187500f, 1.0f),
        FIX16_VERTEX4(-0.688000f, -0.560900f, -0.460500f, 1.0f),
        FIX16_VERTEX4(-0.555800f, -0.022100f, 0.831000f, 1.0f),
        FIX16_VERTEX4(-0.144300f, 0.965800f, -0.215500f, 1.0f),
        FIX16_VERTEX4(-0.014200f, 0.999900f, -0.005800f, 1.0f),
        FIX16_VERTEX4(0.688000f, -0.560900f, 0.460500f, 1.0f),
        FIX16_VERTEX4(0.187500f, 0.250300f, 0.949800f, 1.0f),
        FIX16_VERTEX4(0.005800f, -0.591300f, -0.806500f, 1.0f),
        FIX16_VERTEX4(0.245900f, -0.953400f, -0.175000f, 1.0f),
        FIX16_VERTEX4(0.452400f, -0.181100f, -0.873200f, 1.0f),
        FIX16_VERTEX4(0.187500f, 0.251200f, -0.949600f, 1.0f),
        FIX16_VERTEX4(-0.185100f, -0.943000f, -0.276500f, 1.0f),
        FIX16_VERTEX4(-0.132100f, -0.989800f, -0.053700f, 1.0f),
        FIX16_VERTEX4(0.429100f, 0.260600f, 0.864900f, 1.0f),
        FIX16_VERTEX4(-0.973300f, 0.127300f, -0.190900f, 1.0f),
        FIX16_VERTEX4(0.946200f, 0.190000f, -0.261900f, 1.0f),
        FIX16_VERTEX4(0.144300f, 0.667300f, 0.730700f, 1.0f),
        FIX16_VERTEX4(-0.523800f, -0.845500f, -0.103400f, 1.0f),
        FIX16_VERTEX4(0.550800f, 0.128000f, 0.824800f, 1.0f),
        FIX16_VERTEX4(0.422000f, 0.650300f, 0.631700f, 1.0f),
        FIX16_VERTEX4(-0.092000f, -0.986200f, -0.137500f, 1.0f),
        FIX16_VERTEX4(0.005800f, 0.999900f, -0.014200f, 1.0f),
        FIX16_VERTEX4(0.442500f, -0.846500f, -0.296200f, 1.0f),
        FIX16_VERTEX4(-0.839300f, 0.517800f, 0.165700f, 1.0f),
        FIX16_VERTEX4(0.211900f, -0.965600f, 0.150500f, 1.0f),
        FIX16_VERTEX4(-0.422000f, 0.650300f, 0.631700f, 1.0f),
        FIX16_VERTEX4(0.532700f, -0.287700f, 0.795900f, 1.0f),
        FIX16_VERTEX4(-0.552200f, -0.119900f, 0.825000f, 1.0f),
        FIX16_VERTEX4(-0.548700f, 0.751000f, -0.367200f, 1.0f),
        FIX16_VERTEX4(-0.391700f, 0.870800f, 0.297000f, 1.0f),
        FIX16_VERTEX4(0.143700f, -0.670300f, -0.728000f, 1.0f),
        FIX16_VERTEX4(0.153500f, 0.609800f, -0.777500f, 1.0f),
        FIX16_VERTEX4(0.373400f, 0.407500f, 0.833400f, 1.0f),
        FIX16_VERTEX4(-0.193300f, -0.022700f, -0.980900f, 1.0f),
        FIX16_VERTEX4(-0.852300f, 0.456000f, 0.256200f, 1.0f),
        FIX16_VERTEX4(0.657700f, 0.611300f, 0.440200f, 1.0f),
        FIX16_VERTEX4(0.777500f, 0.609800f, -0.153500f, 1.0f),
        FIX16_VERTEX4(0.460500f, -0.560900f, 0.688000f, 1.0f),
        FIX16_VERTEX4(0.631700f, 0.650300f, 0.422000f, 1.0f),
        FIX16_VERTEX4(0.824800f, 0.128000f, 0.550800f, 1.0f),
        FIX16_VERTEX4(0.224600f, -0.925300f, 0.305700f, 1.0f),
        FIX16_VERTEX4(-0.137500f, -0.986200f, 0.092000f, 1.0f),
        FIX16_VERTEX4(0.831000f, -0.022100f, -0.555800f, 1.0f),
        FIX16_VERTEX4(-0.075600f, -0.808900f, -0.583000f, 1.0f),
        FIX16_VERTEX4(0.825000f, -0.119900f, -0.552200f, 1.0f),
        FIX16_VERTEX4(-0.413500f, 0.668800f, -0.617900f, 1.0f)
};


static uint16_t colors[TEAPOT_POLYGON_CNT] __unused;


#define OT_PRIMITIVE_BUCKETS    1024
#define OT_PRIMITIVE_CNT        VDP1_CMDT_COUNT_MAX

#define OT_PRIMITIVE_BUCKET_SORT_INSERTION      0
#define OT_PRIMITIVE_BUCKET_SORT_BUBBLE         1

struct ot_primitive;

TAILQ_HEAD(ot_primitive_buckets, ot_primitive) ot_buckets;

struct ot_primitive {
        uint16_t otp_color;
        fix16_t otp_avg;
        int16_vector2_t otp_coords[4];

        TAILQ_ENTRY(ot_primitive) otp_entries;
} __aligned(32);

/* OT */
static struct ot_primitive_buckets ot_primitive_buckets[OT_PRIMITIVE_BUCKETS] __unused;
static struct ot_primitive ot_primitive_pool[OT_PRIMITIVE_CNT] __unused;

static uint32_t ot_primitive_pool_idx;

static void ot_init(void);
static void ot_primitive_add(const fix16_vector4_t *, uint16_t);
static void ot_primitive_bucket_sort(int32_t, int32_t);


static void model_polygon_project(const fix16_vector4_t *, const uint32_t *,
    const fix16_vector4_t *, const uint32_t);


#define MODEL_TRANSFORMATIONS   1 /* 0: No transforms   1: Apply transforms */
#define MODEL_PROJECT           1 /* 0: Upload          1: Upload and project */
#define POLYGON_SORT            1 /* 0: No sort         1: Sort */
#define RENDER                  1 /* 0: No render       1: Render */


static struct vdp1_cmdt_polygon __unused polygon;

void
test_07_init(void)
{
        init();

        colors[0] = RGB888_TO_RGB555(255,   0,   0);
        colors[1] = RGB888_TO_RGB555(  0, 255,   0);
        colors[2] = RGB888_TO_RGB555(  0,   0, 255);
        colors[3] = RGB888_TO_RGB555(255, 255,   0);
        colors[4] = RGB888_TO_RGB555(255,   0, 255);
        colors[5] = RGB888_TO_RGB555(255, 255, 255);

        uint32_t color_idx;
        for (color_idx = 0; color_idx < TEAPOT_POLYGON_CNT; color_idx++) {
                uint32_t idx;
                idx = color_idx;

                uint32_t polygon_idx;
                fix16_vector4_t *polygon[4];
                for (polygon_idx = 0; polygon_idx < 4; polygon_idx++) {
                        uint32_t vertex_idx;
                        vertex_idx = teapot_indices[(4 * idx) + polygon_idx];
                        fix16_vector4_t *vertex;
                        vertex = &teapot_vertices[vertex_idx];

                        polygon[polygon_idx] = vertex;
                }

                fix16_t avg;
                avg = fix16_add(fix16_mul(fix16_add(
                                fix16_add(polygon[0]->z, polygon[1]->z),
                                fix16_add(polygon[2]->z, polygon[3]->z)),
                        F16(1.0f / 4.0f)), F16(0.1f));

                uint16_t color;
                color = fix16_to_int(fix16_add(
                            fix16_mul(fix16_abs(avg), F16(255.0f)),
                            F16(16.0f)));

                colors[color_idx] = RGB888_TO_RGB555(color, color, color);
        }

        ot_init();
        matrix_stack_init();

        matrix_stack_mode(MATRIX_STACK_MODE_PROJECTION);

        fix16_t ratio;
        ratio = F16((float)SCREEN_WIDTH / (float)SCREEN_HEIGHT);

        matrix_stack_orthographic_project(-ratio, ratio, F16(1.0f), F16(-1.0f),
            F16(1.0f), F16(1000.0f));

        matrix_stack_mode(MATRIX_STACK_MODE_MODEL_VIEW);
        matrix_stack_translate(F16(0.0f), F16(0.0f), F16(-10.0f));

        vdp1_cmdt_list_begin(0); {
                vdp1_cmdt_local_coord_set(SCREEN_WIDTH / 2, SCREEN_HEIGHT / 2);
                vdp1_cmdt_end();
        } vdp1_cmdt_list_end(0);

        memset(&polygon, 0x00, sizeof(polygon));
}

void
test_07_update(void)
{
        static fix16_t angle __unused = F16(-1.0f);

        if (digital_pad.connected == 1) {
                if (digital_pad.held.button.start) {
                        return;
                }
        }

        cons_buffer(&cons, "[H[2J");

        uint16_t start_tick;
        start_tick = tick;

        uint16_t start_scanline;
        start_scanline = vdp2_tvmd_vcount_get();

        matrix_stack_mode(MATRIX_STACK_MODE_MODEL_VIEW);
        matrix_stack_push(); {
                /* C=VM
                 * D=CR=V(MR)
                 * E=DS=V(MRS) */
#if MODEL_TRANSFORMATIONS == 1
                matrix_stack_translate(F16(0.0f), F16(0.0f), F16(0.0f));
                matrix_stack_rotate(fix16_mul(F16(2.0f), angle), 0);
                matrix_stack_rotate(angle, 1);
                matrix_stack_rotate(angle, 2);
#endif

#if MODEL_PROJECT == 1
                model_polygon_project(teapot_vertices, teapot_indices,
                    teapot_normals, TEAPOT_POLYGON_CNT);
#endif
        } matrix_stack_pop();

        angle = fix16_add(angle, F16(-2.0f));

        int32_t buckets;
        buckets = 0;

        int32_t polygons;
        polygons = 0;

        vdp1_cmdt_list_begin(1); {
                int32_t idx;
                for (idx = OT_PRIMITIVE_BUCKETS - 1; idx >= 0; idx--) {
                        /* Skip empty buckets */
                        if (TAILQ_EMPTY(&ot_primitive_buckets[idx])) {
                                continue;
                        }

                        buckets++;

#if POLYGON_SORT == 1
                        ot_primitive_bucket_sort(idx & (OT_PRIMITIVE_BUCKETS - 1),
                                OT_PRIMITIVE_BUCKET_SORT_INSERTION);
#endif
#if RENDER == 1
                        struct ot_primitive *otp;
                        TAILQ_FOREACH (otp, &ot_primitive_buckets[idx], otp_entries) {
                                polygons++;

                                polygon.cp_color = otp->otp_color;
                                polygon.cp_mode.transparent_pixel = true;

                                polygon.cp_mode.end_code = true;
                                polygon.cp_vertex.a.x = otp->otp_coords[0].x;
                                polygon.cp_vertex.a.y = otp->otp_coords[0].y;
                                polygon.cp_vertex.b.x = otp->otp_coords[1].x;
                                polygon.cp_vertex.b.y = otp->otp_coords[1].y;
                                polygon.cp_vertex.c.x = otp->otp_coords[2].x;
                                polygon.cp_vertex.c.y = otp->otp_coords[2].y;
                                polygon.cp_vertex.d.x = otp->otp_coords[3].x;
                                polygon.cp_vertex.d.y = otp->otp_coords[3].y;

                                vdp1_cmdt_polygon_draw(&polygon);
                        }
#endif
                        /* Clear OT bucket */
                        TAILQ_INIT(&ot_primitive_buckets[idx]);
                }
                vdp1_cmdt_end();
        } vdp1_cmdt_list_end(1);

        uint16_t end_tick;
        end_tick = tick;

        uint16_t end_scanline;
        end_scanline = vdp2_tvmd_vcount_get();

        (void)sprintf(text, "Tick diff: %i-%i=%i\n"
            "Scanline diff: %i-%i=%i\n"
            "Buckets: %i\n"
            "Polygons: %i/%i",
            (int)end_tick,
            (int)start_tick,
            (int)(end_tick - start_tick),
            (int)end_scanline,
            (int)start_scanline,
            (((end_tick - start_tick) == 0)
                ? (int)(end_scanline - start_scanline)
                : 0),
            (int)buckets,
            (int)polygons,
            TEAPOT_POLYGON_CNT);
        cons_buffer(&cons, text);
}

void
test_07_draw(void)
{
        cons_flush(&cons);

        vdp1_cmdt_list_commit();
}

void
test_07_exit(void)
{
}

static void __unused
model_polygon_project(const fix16_vector4_t *vb, const uint32_t *ib,
    const fix16_vector4_t *nb, const uint32_t ib_cnt)
{
        fix16_vector4_t projected_polygon[4];

        fix16_matrix4_t *matrix_projection;
        matrix_projection = matrix_stack_top(
                MATRIX_STACK_MODE_PROJECTION)->ms_matrix;

        fix16_matrix4_t *matrix_model_view;
        matrix_model_view = matrix_stack_top(
                MATRIX_STACK_MODE_MODEL_VIEW)->ms_matrix;

        /* PVMv = (P(VM))v */
        fix16_matrix4_t matrix_mvp;
        fix16_matrix4_multiply(matrix_projection, matrix_model_view,
            &matrix_mvp);

        /* Get inverse matrix */
        fix16_matrix4_t matrix_mv_inv;
        fix16_matrix4_inverse(matrix_model_view, &matrix_mv_inv);

        fix16_vector4_t view_forward;
        view_forward.x = F16(0.0f);
        view_forward.y = F16(0.0f);
        view_forward.z = F16(-1.0f);
        view_forward.w = F16(1.0f);

        /* VIEW_FORWARD in object space */
        fix16_vector4_t view_forward_object;
        fix16_vector4_matrix4_multiply(&matrix_mv_inv, &view_forward, &view_forward_object);

        uint32_t idx;
        for (idx = 0; idx < (ib_cnt * 4); idx += 4)
        {
                uint16_t color;
                color = colors[idx >> 2];

                const fix16_vector4_t *vtx[4];

                /* Submit each vertex in this order: A, B, C, D */
                /* Vertex A */ vtx[0] = &vb[ib[idx]];
                /* Vertex B */ vtx[1] = &vb[ib[idx + 1]];
                /* Vertex C */ vtx[2] = &vb[ib[idx + 2]];
                /* Vertex D */ vtx[3] = &vb[ib[idx + 3]];

                /* Determine which to cull */
                fix16_t dot;
                dot = fix16_vector4_dot(&nb[idx >> 2], &view_forward_object);

                if (dot < F16(0.0f)) {
                        continue;
                }

                fix16_vector4_matrix4_multiply(&matrix_mvp, vtx[0],
                    &projected_polygon[0]);
                fix16_vector4_matrix4_multiply(&matrix_mvp, vtx[1],
                    &projected_polygon[1]);
                fix16_vector4_matrix4_multiply(&matrix_mvp, vtx[3],
                    &projected_polygon[3]);
                fix16_vector4_matrix4_multiply(&matrix_mvp, vtx[2],
                    &projected_polygon[2]);

                ot_primitive_add(projected_polygon, color);
        }
}

static void __unused
ot_init(void)
{
        int32_t bucket_idx;
        for (bucket_idx = 0; bucket_idx < OT_PRIMITIVE_BUCKETS; bucket_idx++) {
                TAILQ_INIT(&ot_primitive_buckets[bucket_idx]);
        }

        ot_primitive_pool_idx = 0;
}

static void __unused
ot_primitive_add(const fix16_vector4_t *proj_vertex, uint16_t color)
{
        struct ot_primitive *otp;
        otp = &ot_primitive_pool[ot_primitive_pool_idx];

        ot_primitive_pool_idx++;
        ot_primitive_pool_idx &= OT_PRIMITIVE_CNT - 1;

        fix16_t avg;
        avg = fix16_add(fix16_mul(fix16_add(
                        fix16_add(proj_vertex[0].z, proj_vertex[1].z),
                        fix16_add(proj_vertex[2].z, proj_vertex[3].z)),
                F16(1.0f / 4.0f)), F16(0.01f));

        otp->otp_color = color;
        otp->otp_avg = avg;

        fix16_t half_width;
        half_width = F16((float)SCREEN_WIDTH / 2.0f);

        fix16_t half_height;
        half_height = F16((float)-SCREEN_HEIGHT / 2.0f);

        otp->otp_coords[0].x = fix16_to_int(fix16_mul(proj_vertex[0].x,
                half_width));
        otp->otp_coords[0].y = fix16_to_int(fix16_mul(proj_vertex[0].y,
                half_height));
        otp->otp_coords[1].x = fix16_to_int(fix16_mul(proj_vertex[1].x,
                half_width));
        otp->otp_coords[1].y = fix16_to_int(fix16_mul(proj_vertex[1].y,
                half_height));
        otp->otp_coords[2].x = fix16_to_int(fix16_mul(proj_vertex[2].x,
                half_width));
        otp->otp_coords[2].y = fix16_to_int(fix16_mul(proj_vertex[2].y,
                half_height));
        otp->otp_coords[3].x = fix16_to_int(fix16_mul(proj_vertex[3].x,
                half_width));
        otp->otp_coords[3].y = fix16_to_int(fix16_mul(proj_vertex[3].y,
                half_height));
        /* Screen coordinates */

        fix16_t avg2;
        avg2 = fix16_mul(fix16_abs(avg), F16(100.0f));

        int32_t idx;
        /* XXX */
        idx = fix16_to_int(avg2);

        struct ot_primitive_buckets *otp_bucket;
        otp_bucket = &ot_primitive_buckets[idx & (OT_PRIMITIVE_BUCKETS - 1)];

        TAILQ_INSERT_HEAD(otp_bucket, otp, otp_entries);
}

static void __unused
ot_primitive_bucket_sort(int32_t idx, int32_t type)
{
        struct ot_primitive *head;
        head = NULL;

        struct ot_primitive *safe;
        struct ot_primitive *otp;

        if (type == OT_PRIMITIVE_BUCKET_SORT_INSERTION) {
                for (otp = TAILQ_FIRST(&ot_primitive_buckets[idx]);
                     (otp != NULL) && (safe = TAILQ_NEXT(otp, otp_entries), 1);
                     otp = safe) {
                        struct ot_primitive *otp_current;
                        otp_current = otp;
                        if ((head == NULL) || (otp_current->otp_avg < head->otp_avg)) {
                                TAILQ_NEXT(otp_current, otp_entries) = head;
                                head = otp_current;
                                TAILQ_FIRST(&ot_primitive_buckets[idx]) = head;
                                continue;
                        }

                        struct ot_primitive *otp_p;
                        for (otp_p = head; otp_p != NULL; ) {
                                struct ot_primitive **otp_p_next;
                                otp_p_next = &TAILQ_NEXT(otp_p, otp_entries);

                                if ((*otp_p_next == NULL) ||
                                    (otp_current->otp_avg < (*otp_p_next)->otp_avg)) {
                                        TAILQ_NEXT(otp_current, otp_entries) =
                                            *otp_p_next;
                                        *otp_p_next = otp_current;
                                        break;
                                }

                                otp_p = *otp_p_next;
                        }
                }
        } else if (type == OT_PRIMITIVE_BUCKET_SORT_BUBBLE) {
                bool swapped;
                do {
                        swapped = false;

                        struct ot_primitive *otp_k __unused;
                        otp_k = NULL;

                        head = TAILQ_FIRST(&ot_primitive_buckets[idx]);
                        for (otp = head;
                             (otp != NULL) && (safe = TAILQ_NEXT(otp, otp_entries), 1);
                             otp = safe) {
                                struct ot_primitive *otp_i;
                                otp_i = otp;

                                struct ot_primitive *otp_j;
                                otp_j = TAILQ_NEXT(otp, otp_entries);

                                if (otp_j == NULL) {
                                        continue;
                                }

                                if (otp_j->otp_avg < otp_i->otp_avg) {
                                        if (otp_k == NULL) {
                                                TAILQ_FIRST(&ot_primitive_buckets[idx]) =
                                                    otp_j;
                                        } else {
                                                TAILQ_NEXT(otp_k, otp_entries) =
                                                    otp_j;
                                        }

                                        TAILQ_NEXT(otp_i, otp_entries) =
                                            TAILQ_NEXT(otp_j, otp_entries);
                                        TAILQ_NEXT(otp_j, otp_entries) = otp_i;

                                        swapped = true;
                                }

                                otp_k = otp_i;
                        }
                } while (swapped);
        }
}
